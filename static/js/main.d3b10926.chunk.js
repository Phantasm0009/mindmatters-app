(this.webpackJsonpmindmatters=this.webpackJsonpmindmatters||[]).push([[0],{18:function(e,t,a){},25:function(e,t,a){},26:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),o=a(19),r=a.n(o),i=a(10),c=a(3),l=a(2),d=a(11);const h="MindMattersDB";let u=null,m=!1;const j=async()=>{if(!u)try{console.log("Initializing database..."),u=Object(d.a)(h,2,{upgrade(e,t,a,n){if(console.log("Upgrading database from v".concat(t," to v").concat(a)),!e.objectStoreNames.contains("moodEntries")){console.log("Creating moodEntries store");e.createObjectStore("moodEntries",{keyPath:"id",autoIncrement:!0}).createIndex("date","date",{unique:!1})}e.objectStoreNames.contains("settings")||(console.log("Creating settings store"),e.createObjectStore("settings",{keyPath:"id"})),e.objectStoreNames.contains("themes")||(console.log("Creating themes store"),e.createObjectStore("themes",{keyPath:"id"}))}});const e=await u;return m=!0,console.log("Database initialized successfully with stores:",Array.from(e.objectStoreNames)),e}catch(e){return console.error("Database initialization failed:",e),u=null,null}try{return await u}catch(e){return console.error("Error accessing database:",e),u=null,null}},b=async()=>{try{const e=await j();return e?e.objectStoreNames.contains("moodEntries")?await e.getAll("moodEntries"):(console.error("moodEntries store not found in database"),[]):(console.warn("Database not available, returning empty entries list"),[])}catch(e){return console.error("Error getting mood entries:",e),[]}},p=40.7128,g=-74.006,y=async(e,t)=>{try{if(!navigator.onLine){const e=localStorage.getItem("cachedWeather");if(e){const{data:t,timestamp:a}=JSON.parse(e);if(Date.now()-a<108e5)return Object(l.a)(Object(l.a)({},t),{},{source:"cache"})}throw new Error("Offline and no recent cached weather")}const a="https://api.open-meteo.com/v1/forecast?latitude=".concat(e,"&longitude=").concat(t,"&current=temperature_2m,relative_humidity_2m,apparent_temperature,is_day,precipitation,rain,showers,snowfall,weather_code,cloud_cover,pressure_msl,wind_speed_10m,wind_direction_10m,wind_gusts_10m&hourly=temperature_2m,precipitation_probability,weather_code&daily=weather_code,temperature_2m_max,temperature_2m_min,sunrise,sunset&timezone=auto&forecast_days=1"),n=await fetch(a,{signal:AbortSignal.timeout(5e3)});if(!n.ok)throw new Error("Weather API error: ".concat(n.status));const s=await n.json(),o={data:s,timestamp:Date.now()};return localStorage.setItem("cachedWeather",JSON.stringify(o)),Object(l.a)(Object(l.a)({},s),{},{source:"api"})}catch(a){console.error("Failed to fetch weather:",a);const e=localStorage.getItem("cachedWeather");if(e){const{data:t}=JSON.parse(e);return Object(l.a)(Object(l.a)({},t),{},{source:"old-cache"})}throw a}},O=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return 0===e?t?"\u2600\ufe0f":"\ud83c\udf19":1===e?t?"\ud83c\udf24\ufe0f":"\ud83c\udf19":2===e?t?"\u26c5":"\u2601\ufe0f":3===e?"\u2601\ufe0f":e>=45&&e<=48?"\ud83c\udf2b\ufe0f":e>=51&&e<=57?"\ud83c\udf26\ufe0f":e>=61&&e<=67?"\ud83c\udf27\ufe0f":e>=71&&e<=77?"\u2744\ufe0f":e>=80&&e<=82?"\ud83c\udf27\ufe0f":e>=85&&e<=86?"\ud83c\udf28\ufe0f":e>=95?"\u26c8\ufe0f":t?"\u2600\ufe0f":"\ud83c\udf19"};a(25);const x=e=>{const t={happy:[[255,195,0],[255,153,51],[255,87,51],[255,253,230],[35,35,35]],excited:[[255,89,94],[255,130,67],[255,45,85],[255,245,245],[40,40,40]],calm:[[86,161,200],[121,189,154],[71,150,237],[240,248,255],[45,55,72]],relaxed:[[106,177,135],[132,197,175],[65,176,131],[242,250,242],[50,72,62]],neutral:[[190,190,190],[160,160,170],[130,150,170],[246,246,246],[60,60,60]],sad:[[108,117,187],[143,158,191],[95,110,175],[240,245,250],[45,50,80]],stressed:[[242,103,34],[236,139,94],[255,76,5],[252,247,240],[60,36,21]],angry:[[201,42,42],[220,73,58],[230,46,0],[253,241,240],[70,28,28]],anxious:[[255,177,0],[255,201,71],[255,145,0],[254,250,235],[66,54,30]],tired:[[147,112,170],[170,142,190],[120,90,140],[246,243,248],[60,45,70]],grateful:[[41,166,126],[92,190,143],[39,143,108],[240,250,244],[40,70,55]]};return t[e]||t.neutral},f=e=>"#"+e.map((e=>{const t=e.toString(16);return 1===t.length?"0"+t:t})).join(""),v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return"rgba(".concat(e[0],", ").concat(e[1],", ").concat(e[2],", ").concat(t,")")},w=e=>(299*e[0]+587*e[1]+114*e[2])/1e3>128?"#333333":"#ffffff";a(26);var N=a(0);const S=Object(n.createContext)(),C=()=>Object(n.useContext)(S),k=e=>{let{children:t}=e;const[a,s]=Object(n.useState)("auto"),[o,r]=Object(n.useState)(null),[i,c]=Object(n.useState)(!1),[l,d]=Object(n.useState)(!1),[h,u]=Object(n.useState)(null);Object(n.useEffect)((()=>{let e=!0;return(async()=>{d(!0);try{let e,t=null;if("auto"===a){const a=await m();a&&a.moodValue?(e=await p(a.moodValue),t=j(a.moodValue)):(e=await p("neutral"),t="neutral")}else"custom"===a&&o?(g(o),e=o):(e=await p(a),t=a);u(t),localStorage.setItem("themePreference",a),localStorage.setItem("currentMood",t||""),o&&localStorage.setItem("customTheme",JSON.stringify(o)),localStorage.setItem("appliedThemeVars",JSON.stringify(e))}catch(t){console.error("Failed to apply theme:",t)}finally{e&&d(!1)}})(),()=>{e=!1}}),[a,o]),Object(n.useEffect)((()=>{(async()=>{try{const t=localStorage.getItem("themePreference")||"auto";s(t);const a=localStorage.getItem("currentMood");a&&u(a);const n=localStorage.getItem("customTheme");if(n)try{const e=JSON.parse(n);r(e)}catch(e){console.error("Couldn't parse saved custom theme",e)}const o=localStorage.getItem("appliedThemeVars");if(o)try{const e=JSON.parse(o);g(e)}catch(e){console.error("Couldn't apply saved theme variables",e)}}catch(t){console.error("Error loading saved theme:",t)}})()}),[]);const m=async()=>{try{const e=await b();return e&&0!==e.length?(e.sort(((e,t)=>new Date(t.date)-new Date(e.date))),e[0]):null}catch(e){return console.error("Error getting last mood entry:",e),null}},j=e=>e<=2?"sad":3===e?"anxious":4===e?"stressed":5===e?"neutral":6===e?"tired":7===e?"calm":8===e?"relaxed":9===e?"happy":"excited",p=async e=>{try{const t=await(async e=>x(e))(e),a=(e=>{if(!e||!Array.isArray(e)||e.length<5)return console.error("Invalid palette provided to createThemeFromPalette",e),null;const[t,a,n,s,o]=e,r=w(t),i=w(a),c=w(n),l=w(s),d=t.map((e=>Math.min(255,Math.round(1.2*e)))),h=t.map((e=>Math.round(.8*e))),u=a.map((e=>Math.min(255,Math.round(1.15*e)))),m=a.map((e=>Math.round(.85*e))),j=n.map((e=>Math.min(255,Math.round(1.1*e)))),b=n.map((e=>Math.round(.9*e))),p=v(t,.15),g=s.map((e=>Math.max(0,Math.round(.97*e))));return{"--primary-color":f(t),"--primary-color-light":f(d),"--primary-color-dark":f(h),"--primary-transparent":p,"--secondary-color":f(a),"--secondary-color-light":f(u),"--secondary-color-dark":f(m),"--accent-color":f(n),"--accent-color-light":f(j),"--accent-color-dark":f(b),"--background-light":f(s),"--background-dark":f(g),"--background-white":"#ffffff","--text-primary":f(o),"--text-secondary":"#ffffff"===l?"#dddddd":"#666666","--text-light":v(o,.7),"--text-on-primary":r,"--text-on-secondary":i,"--text-on-accent":c,"--shadow-color":v(o,.1),"--card-border-color":v(t,.3)}})(t);return g(a),a}catch(t){throw console.error("Error applying mood theme:",t),t}},g=e=>{const t=document.documentElement;Object.entries(e).forEach((e=>{let[a,n]=e;t.style.setProperty(a,n)}))},y=e=>{s(e),c(!1)},O=async e=>{d(!0);try{const t=await p(e);return r(t),s("custom"),u(e),localStorage.setItem("customTheme",JSON.stringify(t)),localStorage.setItem("themePreference","custom"),localStorage.setItem("currentMood",e),localStorage.setItem("appliedThemeVars",JSON.stringify(t)),t}catch(t){return console.error("Failed to generate theme from mood:",t),null}finally{d(!1)}},C={currentTheme:a,currentMood:h,changeTheme:y,generateThemeFromMood:O,isApplying:l};return Object(N.jsx)(S.Provider,{value:C,children:Object(N.jsxs)("div",{className:"theme-manager-container",children:[t,Object(N.jsx)("button",{className:"theme-picker-button",onClick:()=>c(!i),"aria-label":"Change theme",children:Object(N.jsx)("span",{className:"theme-icon",children:"\ud83c\udfa8"})}),i&&Object(N.jsxs)("div",{className:"theme-picker",children:[Object(N.jsx)("h3",{children:"Color Theme"}),Object(N.jsxs)("div",{className:"theme-options",children:[Object(N.jsxs)("button",{className:"theme-option ".concat("auto"===a?"active":""),onClick:()=>y("auto"),children:[Object(N.jsx)("div",{className:"theme-preview auto"}),Object(N.jsx)("span",{className:"theme-label",children:"Match Mood"})]}),Object(N.jsxs)("button",{className:"theme-option ".concat("happy"===a?"active":""),onClick:()=>y("happy"),children:[Object(N.jsx)("div",{className:"theme-preview happy"}),Object(N.jsx)("span",{className:"theme-label",children:"Happy"})]}),Object(N.jsxs)("button",{className:"theme-option ".concat("calm"===a?"active":""),onClick:()=>y("calm"),children:[Object(N.jsx)("div",{className:"theme-preview calm"}),Object(N.jsx)("span",{className:"theme-label",children:"Calm"})]}),Object(N.jsxs)("button",{className:"theme-option ".concat("neutral"===a?"active":""),onClick:()=>y("neutral"),children:[Object(N.jsx)("div",{className:"theme-preview neutral"}),Object(N.jsx)("span",{className:"theme-label",children:"Neutral"})]})]}),Object(N.jsxs)("div",{className:"generate-theme",children:[Object(N.jsx)("h4",{children:"Generate Theme from Emotion"}),Object(N.jsxs)("div",{className:"mood-buttons",children:[Object(N.jsx)("button",{onClick:()=>O("excited"),disabled:l,className:"mood-excited",children:"Excited \ud83d\ude03"}),Object(N.jsx)("button",{onClick:()=>O("happy"),disabled:l,className:"mood-happy",children:"Happy \ud83d\ude0a"}),Object(N.jsx)("button",{onClick:()=>O("calm"),disabled:l,className:"mood-calm",children:"Calm \ud83d\ude0c"}),Object(N.jsx)("button",{onClick:()=>O("relaxed"),disabled:l,className:"mood-relaxed",children:"Relaxed \ud83d\ude07"}),Object(N.jsx)("button",{onClick:()=>O("neutral"),disabled:l,className:"mood-neutral",children:"Neutral \ud83d\ude10"}),Object(N.jsx)("button",{onClick:()=>O("sad"),disabled:l,className:"mood-sad",children:"Sad \ud83d\ude22"}),Object(N.jsx)("button",{onClick:()=>O("anxious"),disabled:l,className:"mood-anxious",children:"Anxious \ud83d\ude30"}),Object(N.jsx)("button",{onClick:()=>O("tired"),disabled:l,className:"mood-tired",children:"Tired \ud83d\ude34"})]})]}),h&&Object(N.jsxs)("div",{style:{marginTop:"15px",textAlign:"center",fontSize:"0.9rem",opacity:.7},children:["Current mood theme: ",Object(N.jsx)("strong",{children:h})]}),l&&Object(N.jsxs)("div",{className:"theme-applying",children:[Object(N.jsx)("div",{className:"theme-spinner"}),Object(N.jsx)("span",{children:"Applying theme..."})]})]})]})})};var T=()=>{const[e,t]=Object(n.useState)({mood:"",moodValue:5,thoughts:"",activities:[],gratitude:"",weather:null}),[a,s]=Object(n.useState)(!1),[o,r]=Object(n.useState)(!0),[i,c]=Object(n.useState)(null),{generateThemeFromMood:d,currentTheme:h}=C();Object(n.useEffect)((()=>{let e=!0;return(async()=>{r(!0);try{const a=await new Promise(((e,t)=>{if(!navigator.geolocation)return console.log("Geolocation not supported, using default location"),void e({latitude:p,longitude:g});navigator.geolocation.getCurrentPosition((t=>{e({latitude:t.coords.latitude,longitude:t.coords.longitude})}),(t=>{console.error("Error getting location:",t.message),e({latitude:p,longitude:g})}),{timeout:1e4})})),n=await y(a.latitude,a.longitude);e&&(n&&n.current&&t((e=>Object(l.a)(Object(l.a)({},e),{},{weather:{temperature:n.current.temperature_2m,weatherCode:n.current.weather_code,humidity:n.current.relative_humidity_2m,isDay:1===n.current.is_day}}))),r(!1))}catch(a){e&&(console.error("Failed to load weather:",a),c("Couldn't fetch weather data"),r(!1))}})(),()=>{e=!1}}),[]);const u=a=>{const{name:n,value:s}=a.target;t(Object(l.a)(Object(l.a)({},e),{},{[n]:s}))},m=e=>["Very sad","Sad","Down","Neutral","Okay","Good","Happy","Very happy","Excellent","Amazing"][e-1]||"Neutral";return Object(N.jsxs)("div",{className:"journal-entry",children:[Object(N.jsx)("h2",{children:"Daily Journal Entry"}),Object(N.jsx)("div",{className:"theme-status",children:Object(N.jsx)("small",{children:"UI color theme will update based on your mood"})}),Object(N.jsxs)("form",{onSubmit:async a=>{a.preventDefault();const n=Object(l.a)(Object(l.a)({},e),{},{date:(new Date).toISOString()});try{await(async e=>{try{const t=await j();return t?t.objectStoreNames.contains("moodEntries")?(await t.add("moodEntries",e),console.log("Journal entry saved successfully"),!0):(console.error("Cannot save entry: moodEntries store not found"),!1):(console.error("Cannot save entry: Database not available"),!1)}catch(t){return console.error("Error saving journal entry:",t),!1}})(n),s(!0),setTimeout((()=>s(!1)),3e3),t({mood:"",moodValue:5,thoughts:"",activities:[],gratitude:"",weather:e.weather})}catch(o){console.error("Failed to save entry:",o)}},children:[Object(N.jsx)("div",{className:"weather-info",children:o?Object(N.jsx)("div",{className:"weather-loading-mini",children:"Loading weather..."}):i?Object(N.jsx)("div",{className:"weather-error-mini",children:i}):e.weather?Object(N.jsxs)("div",{className:"current-weather-mini",children:[Object(N.jsx)("span",{className:"weather-icon-mini",children:(O=e.weather.weatherCode,x=e.weather.isDay,0===O?x?"\u2600\ufe0f":"\ud83c\udf19":1===O?x?"\ud83c\udf24\ufe0f":"\ud83c\udf19":2===O?x?"\u26c5":"\u2601\ufe0f":3===O?"\u2601\ufe0f":O>=45&&O<=48?"\ud83c\udf2b\ufe0f":O>=51&&O<=57?"\ud83c\udf26\ufe0f":O>=61&&O<=67?"\ud83c\udf27\ufe0f":O>=71&&O<=77?"\u2744\ufe0f":O>=80&&O<=82?"\ud83c\udf27\ufe0f":O>=85&&O<=86?"\ud83c\udf28\ufe0f":O>=95?"\u26c8\ufe0f":x?"\u2600\ufe0f":"\ud83c\udf19")}),Object(N.jsxs)("span",{className:"weather-temp-mini",children:[Math.round(e.weather.temperature),"\xb0C"]}),Object(N.jsx)("span",{className:"weather-note",children:"Weather is being recorded with your entry"})]}):null}),Object(N.jsxs)("div",{className:"mood-selector",children:[Object(N.jsx)("h3",{children:"How are you feeling today?"}),Object(N.jsxs)("div",{className:"mood-slider-container",children:[Object(N.jsx)("input",{type:"range",min:"1",max:"10",value:e.moodValue,onChange:a=>{const n=parseInt(a.target.value);t(Object(l.a)(Object(l.a)({},e),{},{moodValue:n})),d(n);const s={1:"Very sad",2:"Sad",3:"Anxious",4:"Stressed",5:"Neutral",6:"Content",7:"Calm",8:"Happy",9:"Very happy",10:"Excited"};e.mood&&e.mood!==m(e.moodValue-1)||t((e=>Object(l.a)(Object(l.a)({},e),{},{mood:s[n]||""})))},className:"mood-slider"}),Object(N.jsx)("div",{className:"mood-emoji",children:(b=e.moodValue,["\ud83d\ude1e","\ud83d\ude14","\ud83d\ude15","\ud83d\ude10","\ud83d\ude42","\ud83d\ude0a","\ud83d\ude04","\ud83d\ude01","\ud83e\udd29","\ud83d\ude0d"][b-1]||"\ud83d\ude10")}),Object(N.jsx)("div",{className:"mood-label",children:m(e.moodValue)})]})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{htmlFor:"mood",children:"In one word, describe your mood:"}),Object(N.jsx)("input",{type:"text",id:"mood",name:"mood",value:e.mood,onChange:u,placeholder:"e.g. Peaceful, Anxious, Excited..."})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{htmlFor:"thoughts",children:"What's on your mind today?"}),Object(N.jsx)("textarea",{id:"thoughts",name:"thoughts",value:e.thoughts,onChange:u,placeholder:"Share your thoughts, feelings, or experiences...",rows:"5"})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{children:"Activities today: (select all that apply)"}),Object(N.jsx)("div",{className:"activity-tags",children:["Exercise","Reading","Meditation","Family time","Friends","Work","Hobby","Nature"].map((a=>Object(N.jsx)("div",{className:"activity-tag ".concat(e.activities.includes(a)?"selected":""),onClick:()=>(a=>{const n=[...e.activities];if(n.includes(a)){const e=n.indexOf(a);n.splice(e,1)}else n.push(a);t(Object(l.a)(Object(l.a)({},e),{},{activities:n}))})(a),children:a},a)))})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{htmlFor:"gratitude",children:"What are you grateful for today?"}),Object(N.jsx)("textarea",{id:"gratitude",name:"gratitude",value:e.gratitude,onChange:u,placeholder:"List one or more things you appreciate today...",rows:"3"})]}),Object(N.jsx)("button",{type:"submit",className:"submit-button",children:"Save Entry"}),a&&Object(N.jsx)("div",{className:"success-message",children:Object(N.jsx)("span",{children:"\u2705 Journal entry saved successfully!"})})]})]});var b,O,x};a(28);var E=()=>{const[e,t]=Object(n.useState)([]),[a,s]=Object(n.useState)(!0),[o,r]=Object(n.useState)("all"),[i,c]=Object(n.useState)(null),[l,d]=Object(n.useState)("");Object(n.useEffect)((()=>{(async()=>{try{const e=(await b()).sort(((e,t)=>new Date(t.date)-new Date(e.date)));t(e)}catch(e){console.error("Error fetching journal entries:",e)}finally{s(!1)}})()}),[]);const h=()=>{let t=[...e];if("week"===o){const e=new Date;e.setDate(e.getDate()-7),t=t.filter((t=>new Date(t.date)>=e))}else if("month"===o){const e=new Date;e.setMonth(e.getMonth()-1),t=t.filter((t=>new Date(t.date)>=e))}if(l.trim()){const e=l.toLowerCase();t=t.filter((t=>t.thoughts&&t.thoughts.toLowerCase().includes(e)||t.mood&&t.mood.toLowerCase().includes(e)||t.gratitude&&t.gratitude.toLowerCase().includes(e)))}return t},u=e=>new Date(e).toLocaleDateString(void 0,{weekday:"short",year:"numeric",month:"short",day:"numeric"}),m=e=>["\ud83d\ude1e","\ud83d\ude14","\ud83d\ude15","\ud83d\ude10","\ud83d\ude42","\ud83d\ude0a","\ud83d\ude04","\ud83d\ude01","\ud83e\udd29","\ud83d\ude0d"][e-1]||"\ud83d\ude10",j=e=>{if(!e)return{};let t,a;return e<=2?(t="var(--sad-color, rgb(108, 117, 187))",a="rgba(108, 117, 187, 0.05)"):3===e?(t="var(--anxious-color, rgb(255, 177, 0))",a="rgba(255, 177, 0, 0.05)"):4===e?(t="var(--stressed-color, rgb(242, 103, 34))",a="rgba(242, 103, 34, 0.05)"):5===e?(t="var(--neutral-color, rgb(190, 190, 190))",a="rgba(190, 190, 190, 0.05)"):6===e?(t="var(--tired-color, rgb(147, 112, 170))",a="rgba(147, 112, 170, 0.05)"):7===e?(t="var(--calm-color, rgb(86, 161, 200))",a="rgba(86, 161, 200, 0.05)"):8===e?(t="var(--relaxed-color, rgb(106, 177, 135))",a="rgba(106, 177, 135, 0.05)"):9===e?(t="var(--happy-color, rgb(255, 195, 0))",a="rgba(255, 195, 0, 0.05)"):(t="var(--excited-color, rgb(255, 89, 94))",a="rgba(255, 89, 94, 0.05)"),{borderLeft:"4px solid ".concat(t),background:"linear-gradient(to right, ".concat(a,", transparent 20%)")}},p=()=>{c(null)};return Object(N.jsxs)("div",{className:"journal-log",children:[Object(N.jsx)("h2",{children:"Your Journal History"}),Object(N.jsxs)("div",{className:"journal-controls",children:[Object(N.jsx)("div",{className:"search-box",children:Object(N.jsx)("input",{type:"text",placeholder:"Search your entries...",value:l,onChange:e=>d(e.target.value)})}),Object(N.jsxs)("div",{className:"filter-controls",children:[Object(N.jsx)("button",{className:"all"===o?"active":"",onClick:()=>r("all"),children:"All Time"}),Object(N.jsx)("button",{className:"month"===o?"active":"",onClick:()=>r("month"),children:"Past Month"}),Object(N.jsx)("button",{className:"week"===o?"active":"",onClick:()=>r("week"),children:"Past Week"})]})]}),a?Object(N.jsxs)("div",{className:"loading-spinner",children:[Object(N.jsx)("div",{className:"spinner"}),Object(N.jsx)("p",{children:"Loading your journal entries..."})]}):Object(N.jsx)("div",{className:"entries-list",children:h().length>0?h().map(((e,t)=>{return Object(N.jsxs)("div",{className:"entry-card",onClick:()=>(e=>{c(e)})(e),style:j(e.moodValue),children:[Object(N.jsxs)("div",{className:"entry-header",children:[Object(N.jsx)("span",{className:"entry-date",children:u(e.date)}),Object(N.jsxs)("span",{className:"entry-mood",children:[m(e.moodValue)," ",e.mood||"Level ".concat(e.moodValue)]})]}),e.weather&&Object(N.jsxs)("div",{className:"entry-weather",children:[Object(N.jsx)("span",{className:"weather-icon",children:(a=e.weather.weatherCode,n=e.weather.isDay,0===a?n?"\u2600\ufe0f":"\ud83c\udf19":1===a?n?"\ud83c\udf24\ufe0f":"\ud83c\udf19":2===a?n?"\u26c5":"\u2601\ufe0f":3===a?"\u2601\ufe0f":a>=45&&a<=48?"\ud83c\udf2b\ufe0f":a>=51&&a<=57?"\ud83c\udf26\ufe0f":a>=61&&a<=67?"\ud83c\udf27\ufe0f":a>=71&&a<=77?"\u2744\ufe0f":a>=80&&a<=82?"\ud83c\udf27\ufe0f":a>=85&&a<=86?"\ud83c\udf28\ufe0f":a>=95?"\u26c8\ufe0f":n?"\u2600\ufe0f":"\ud83c\udf19")}),Object(N.jsxs)("span",{className:"weather-temp",children:[Math.round(e.weather.temperature),"\xb0C"]})]}),Object(N.jsx)("div",{className:"entry-preview",children:e.thoughts?Object(N.jsxs)("p",{children:[e.thoughts.substring(0,100),e.thoughts.length>100?"...":""]}):Object(N.jsx)("p",{className:"no-content",children:"No thoughts recorded"})}),Object(N.jsx)("div",{className:"entry-footer",children:e.activities&&e.activities.length>0&&Object(N.jsxs)("div",{className:"entry-tags",children:[e.activities.slice(0,3).map(((e,t)=>Object(N.jsx)("span",{className:"activity-tag",children:e},t))),e.activities.length>3&&Object(N.jsxs)("span",{className:"more-tag",children:["+",e.activities.length-3]})]})})]},t);var a,n})):Object(N.jsxs)("div",{className:"no-entries",children:[Object(N.jsx)("p",{children:"No journal entries found"}),l&&Object(N.jsx)("p",{children:"Try changing your search term"}),"all"!==o&&Object(N.jsx)("p",{children:"Try changing your date filter"})]})}),i&&Object(N.jsx)("div",{className:"entry-modal-overlay",onClick:p,children:Object(N.jsxs)("div",{className:"entry-modal",onClick:e=>e.stopPropagation(),children:[Object(N.jsx)("button",{className:"close-button",onClick:p,children:"\xd7"}),Object(N.jsx)("div",{className:"entry-modal-date",children:u(i.date)}),Object(N.jsxs)("div",{className:"entry-modal-mood",children:[Object(N.jsx)("span",{className:"large-emoji",children:m(i.moodValue)}),Object(N.jsx)("h3",{children:i.mood||"Mood Level: ".concat(i.moodValue)})]}),Object(N.jsxs)("div",{className:"entry-modal-section",children:[Object(N.jsx)("h4",{children:"Thoughts"}),Object(N.jsx)("p",{children:i.thoughts||"No thoughts recorded"})]}),i.activities&&i.activities.length>0&&Object(N.jsxs)("div",{className:"entry-modal-section",children:[Object(N.jsx)("h4",{children:"Activities"}),Object(N.jsx)("div",{className:"activity-tags",children:i.activities.map(((e,t)=>Object(N.jsx)("span",{className:"activity-tag",children:e},t)))})]}),i.gratitude&&Object(N.jsxs)("div",{className:"entry-modal-section",children:[Object(N.jsx)("h4",{children:"Gratitude"}),Object(N.jsx)("p",{children:i.gratitude})]})]})})]})},M=a(5),A=a(13);a(29);M.c.register(...M.j);var I=()=>{const[e,t]=Object(n.useState)([]),[a,s]=Object(n.useState)(!0),[o,r]=Object(n.useState)("week"),[i,c]=Object(n.useState)(!0),[l,d]=Object(n.useState)({labels:[],datasets:[{label:"Mood Trend",data:[],borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",borderWidth:1}]});Object(n.useEffect)((()=>{(async()=>{s(!0);try{const e=await(async()=>{try{return await b()}catch(e){return console.error("Error fetching mood data:",e),[]}})(),a=e&&e.length>0?e:h();t(a)}catch(e){console.error("Error fetching mood data:",e),t(h())}finally{s(!1)}})()}),[]),Object(n.useEffect)((()=>{e&&e.length>0&&m()}),[e,o]);const h=()=>{const e=new Date,t=[];for(let a=30;a>=0;a--){const n=new Date(e);let s;n.setDate(e.getDate()-a),s=a%7===0?Math.min(10,Math.floor(3*Math.random())+7):a%5===0?Math.max(1,Math.floor(3*Math.random())+2):Math.floor(5*Math.random())+4,t.push({date:n.toISOString().split("T")[0],moodValue:s,mood:g(s-1)})}return t},u=()=>{if(!e||0===e.length)return[];const t=new Date;let a=new Date;if("week"===o)a.setDate(t.getDate()-7);else if("month"===o)a.setMonth(t.getMonth()-1);else{if("year"!==o)return e;a.setFullYear(t.getFullYear()-1)}return e.filter((e=>new Date(e.date)>=a))},m=()=>{const e=u();if(e&&0!==e.length)try{const t=e.map((e=>{return t=e.date,new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"});var t})),a=e.map((e=>e.moodValue||0));d({labels:t,datasets:[{label:"Mood Level",data:a,borderColor:"rgba(66, 133, 244, 1)",backgroundColor:"rgba(66, 133, 244, 0.2)",fill:!0,tension:.4,pointBackgroundColor:"rgba(66, 133, 244, 1)",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6}]})}catch(t){console.error("Error updating chart data:",t),d({labels:[],datasets:[{label:"Mood Trend",data:[],borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",borderWidth:1}]})}else d({labels:[],datasets:[{label:"Mood Trend",data:[],borderColor:"rgba(75, 192, 192, 1)",backgroundColor:"rgba(75, 192, 192, 0.2)",borderWidth:1}]})},j={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{mode:"index",intersect:!1,backgroundColor:"rgba(255, 255, 255, 0.9)",titleColor:"#333",bodyColor:"#555",borderColor:"#ddd",borderWidth:1,padding:10,displayColors:!1,bodyFont:{size:14},callbacks:{title:function(e){return e[0].label},label:function(e){return"Mood: ".concat(e.raw,"/10")},afterLabel:function(e){const t=u();if(!t||!e||void 0===e.dataIndex)return"";const a=t[e.dataIndex];return a&&a.mood?"Feeling: ".concat(a.mood):""}}}},scales:{y:{min:0,max:10,ticks:{stepSize:1,font:{size:12},color:"#666"},title:{display:!0,text:"Mood Level",font:{size:14,weight:"bold"},color:"#555"},grid:{display:i,color:"rgba(0, 0, 0, 0.05)"}},x:{ticks:{font:{size:11},color:"#666",maxRotation:45,minRotation:0},grid:{display:i,color:"rgba(0, 0, 0, 0.05)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1},elements:{line:{tension:.4}}},p=(()=>{const e=u();if(!e||0===e.length)return{avg:"0.0",highest:"0",lowest:"0",entries:0};const t=e.map((e=>e.moodValue));return{avg:(t.reduce(((e,t)=>e+t),0)/t.length).toFixed(1),highest:Math.max(...t),lowest:Math.min(...t),entries:e.length}})();function g(e){return["Very sad","Sad","Down","Neutral","Okay","Good","Happy","Very happy","Excellent","Amazing"][e]||"Neutral"}return Object(N.jsxs)("div",{className:"mood-tracker",children:[Object(N.jsx)("h2",{children:"Mood Trends"}),Object(N.jsxs)("div",{className:"chart-controls",children:[Object(N.jsxs)("div",{className:"time-range-selector",children:[Object(N.jsx)("button",{className:"week"===o?"active":"",onClick:()=>r("week"),children:"Week"}),Object(N.jsx)("button",{className:"month"===o?"active":"",onClick:()=>r("month"),children:"Month"}),Object(N.jsx)("button",{className:"year"===o?"active":"",onClick:()=>r("year"),children:"Year"}),Object(N.jsx)("button",{className:"all"===o?"active":"",onClick:()=>r("all"),children:"All Time"})]}),Object(N.jsxs)("label",{className:"toggle-grid",children:[Object(N.jsx)("input",{type:"checkbox",checked:i,onChange:()=>c(!i)}),"Show Grid"]})]}),a?Object(N.jsxs)("div",{className:"loading-spinner",children:[Object(N.jsx)("div",{className:"spinner"}),Object(N.jsx)("p",{children:"Loading your mood data..."})]}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("div",{className:"chart-container",children:e&&e.length>0?Object(N.jsx)(A.b,{data:l,options:j}):Object(N.jsx)("div",{className:"no-data-message",children:Object(N.jsx)("p",{children:"No mood data available yet. Start logging your daily moods!"})})}),Object(N.jsxs)("div",{className:"mood-statistics",children:[Object(N.jsxs)("div",{className:"stat-card",children:[Object(N.jsx)("div",{className:"stat-value",children:p.avg}),Object(N.jsx)("div",{className:"stat-label",children:"Average Mood"})]}),Object(N.jsxs)("div",{className:"stat-card",children:[Object(N.jsx)("div",{className:"stat-value",children:p.highest}),Object(N.jsx)("div",{className:"stat-label",children:"Highest Mood"})]}),Object(N.jsxs)("div",{className:"stat-card",children:[Object(N.jsx)("div",{className:"stat-value",children:p.lowest}),Object(N.jsx)("div",{className:"stat-label",children:"Lowest Mood"})]}),Object(N.jsxs)("div",{className:"stat-card",children:[Object(N.jsx)("div",{className:"stat-value",children:p.entries}),Object(N.jsx)("div",{className:"stat-label",children:"Total Entries"})]})]}),Object(N.jsxs)("div",{className:"mood-insights",children:[Object(N.jsx)("h3",{children:"Insights"}),u().length>0?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("p",{children:["Your average mood is ",Object(N.jsxs)("span",{className:"highlight",children:[p.avg,"/10"]})," over the selected period."]}),p.entries>3&&Object(N.jsx)("p",{children:"You've been consistently tracking your mood - great job maintaining your mental health routine!"}),"week"!==o&&p.entries>7&&Object(N.jsx)("p",{children:"Tip: Looking at weekly patterns can help identify specific triggers that affect your mood."})]}):Object(N.jsx)("p",{children:"Not enough data for this time period. Keep logging entries to see insights."})]})]})]})};a(30);var P=()=>{const[e,t]=Object(n.useState)(null),[a,s]=Object(n.useState)(!1),[o,r]=Object(n.useState)(0),[i,c]=Object(n.useState)(""),[l,d]=Object(n.useState)(0),[h,u]=Object(n.useState)("all"),[m,j]=Object(n.useState)(0),[b,p]=Object(n.useState)(0),[g,y]=Object(n.useState)(0),O=Object(n.useRef)(null),x=Object(n.useRef)(null),f=Object(n.useRef)(null),v=Object(n.useRef)(null),{currentTheme:w}=C(),S=[{id:"box",title:"Box Breathing",description:"A powerful stress-reducer used by Navy SEALs. Creates a rhythm of equal parts inhale, hold, exhale, and hold.",phases:[{name:"Inhale",duration:4,instruction:"Breathe in slowly through your nose, filling your lungs completely"},{name:"Hold",duration:4,instruction:"Hold your breath, keeping your chest expanded"},{name:"Exhale",duration:4,instruction:"Release breath slowly through your mouth with pursed lips"},{name:"Hold",duration:4,instruction:"Keep lungs empty and relax your chest"}],totalCycles:4,benefits:["Reduces stress and anxiety","Improves concentration and focus","Regulates autonomic nervous system","Can be done anywhere, anytime"],category:"stress",color:"#4285f4",animationType:"box",icon:"\u2b1b"},{id:"4-7-8",title:"4-7-8 Breathing",description:"Developed by Dr. Andrew Weil, this technique acts as a natural tranquilizer for the nervous system.",phases:[{name:"Inhale",duration:4,instruction:"Breathe in quietly through your nose for a count of 4"},{name:"Hold",duration:7,instruction:"Hold your breath for a count of 7, maintaining relaxed muscles"},{name:"Exhale",duration:8,instruction:"Exhale completely through your mouth with a whooshing sound for 8 counts"}],totalCycles:4,benefits:["Helps you fall asleep quickly","Manages food cravings","Reduces anxiety and stress","Controls emotional responses"],category:"sleep",color:"#673ab7",animationType:"circle",icon:"\ud83c\udf19"},{id:"diaphragmatic",title:"Diaphragmatic Breathing",description:"Also known as 'belly breathing', it strengthens the diaphragm and reduces stress by encouraging full oxygen exchange.",phases:[{name:"Inhale",duration:5,instruction:"Breathe in deeply through your nose, expanding your belly, not your chest"},{name:"Exhale",duration:5,instruction:"Breathe out slowly through pursed lips, feeling your belly contract"}],totalCycles:5,benefits:["Slows heart rate and lowers blood pressure","Strengthens diaphragm muscles","Reduces cortisol levels","Improves core muscle stability"],category:"focus",color:"#0f9d58",animationType:"wave",icon:"\ud83c\udf0a"},{id:"resonant",title:"Resonant Breathing",description:"Breathe at a rate of 5-7 breaths per minute to achieve resonance with heart rhythms and optimize HRV (Heart Rate Variability).",phases:[{name:"Inhale",duration:5.5,instruction:"Breathe in slowly through your nose for 5.5 seconds"},{name:"Exhale",duration:5.5,instruction:"Breathe out slowly through your nose for 5.5 seconds"}],totalCycles:6,benefits:["Optimizes heart rate variability","Creates mind-body coherence","Boosts immune system function","Enhances emotional regulation"],category:"calm",color:"#ff6d00",animationType:"pulse",icon:"\ud83d\udc93"},{id:"2-to-1",title:"2-to-1 Breathing",description:"Emphasizes longer exhalations to activate the parasympathetic nervous system for deep relaxation and stress relief.",phases:[{name:"Inhale",duration:4,instruction:"Breathe in through your nose for a count of 4"},{name:"Exhale",duration:8,instruction:"Breathe out slowly through your nose or mouth for a count of 8"}],totalCycles:5,benefits:["Activates the relaxation response","Reduces blood pressure quickly","Helps with insomnia","Calms anxious thoughts"],category:"sleep",color:"#db4437",animationType:"expand",icon:"\ud83c\udf2c\ufe0f"},{id:"alternate-nostril",title:"Alternate Nostril Breathing",description:"Traditional yogic practice (Nadi Shodhana) that balances the hemispheres of your brain and promotes mental clarity.",phases:[{name:"Close Right Nostril",duration:2,instruction:"Use your right thumb to close your right nostril"},{name:"Inhale Left",duration:4,instruction:"Breathe in slowly through your left nostril"},{name:"Close Both Nostrils",duration:2,instruction:"Close both nostrils with your thumb and ring finger"},{name:"Open Right Nostril",duration:2,instruction:"Release your thumb from your right nostril"},{name:"Exhale Right",duration:4,instruction:"Breathe out through your right nostril"},{name:"Inhale Right",duration:4,instruction:"Breathe in through your right nostril"},{name:"Close Both Nostrils",duration:2,instruction:"Close both nostrils again"},{name:"Open Left Nostril",duration:2,instruction:"Release your ring finger from your left nostril"},{name:"Exhale Left",duration:4,instruction:"Breathe out through your left nostril"}],totalCycles:3,benefits:["Balances left and right brain hemispheres","Enhances mental clarity and alertness","Prepares the mind for meditation","Purifies subtle energy channels"],category:"focus",color:"#9c27b0",animationType:"alternate",icon:"\ud83d\udc43"},{id:"progressive",title:"Progressive Relaxation Breathing",description:"Combines deep breathing with muscle relaxation to systematically release physical tension throughout your body.",phases:[{name:"Inhale",duration:4,instruction:"Breathe in deeply, gently tensing your muscles"},{name:"Hold",duration:2,instruction:"Hold your breath and the tension"},{name:"Exhale",duration:6,instruction:"Breathe out slowly, releasing all tension"},{name:"Rest",duration:2,instruction:"Rest and notice the sensation of relaxation"}],totalCycles:4,benefits:["Releases chronic muscle tension","Improves body awareness","Reduces physical symptoms of stress","Helps with chronic pain management"],category:"stress",color:"#795548",animationType:"relax",icon:"\ud83e\udde0"},{id:"coherent",title:"Coherent Breathing",description:"A simple yet powerful technique that promotes heart-brain coherence through a steady rhythm of 5 breaths per minute.",phases:[{name:"Inhale",duration:6,instruction:"Breathe in slowly through your nose for a count of 6"},{name:"Exhale",duration:6,instruction:"Breathe out slowly through your nose for a count of 6"}],totalCycles:5,benefits:["Synchronizes heart rate variability","Enhances cognitive performance","Improves emotional stability","Reduces symptoms of anxiety and depression"],category:"calm",color:"#03a9f4",animationType:"sphere",icon:"\ud83d\udd35"}],k=[{id:"all",name:"All Exercises"},{id:"stress",name:"Stress Relief"},{id:"focus",name:"Focus & Clarity"},{id:"sleep",name:"Sleep Aid"},{id:"calm",name:"Calming"}],T=()=>{O.current&&clearTimeout(O.current),f.current&&clearInterval(f.current),v.current&&clearInterval(v.current),O.current=null,f.current=null,v.current=null};Object(n.useEffect)((()=>()=>{T(),x.current&&(x.current.pause(),x.current=null)}),[]);const E=e=>{try{x.current&&(x.current.pause(),x.current=null);const t=new(window.AudioContext||window.webkitAudioContext),a=t.createOscillator(),n=t.createGain();switch(a.connect(n),n.connect(t.destination),e){case"inhale":a.type="sine",a.frequency.value=440,n.gain.setValueAtTime(0,t.currentTime),n.gain.linearRampToValueAtTime(.2,t.currentTime+.1),n.gain.linearRampToValueAtTime(0,t.currentTime+.5),a.start(),a.stop(t.currentTime+.6);break;case"exhale":a.type="sine",a.frequency.value=330,n.gain.setValueAtTime(0,t.currentTime),n.gain.linearRampToValueAtTime(.2,t.currentTime+.1),n.gain.linearRampToValueAtTime(0,t.currentTime+.7),a.start(),a.stop(t.currentTime+.8);break;case"hold":a.type="sine",a.frequency.value=392,n.gain.setValueAtTime(0,t.currentTime),n.gain.linearRampToValueAtTime(.1,t.currentTime+.1),n.gain.linearRampToValueAtTime(0,t.currentTime+.3),a.start(),a.stop(t.currentTime+.4);break;case"complete":a.type="sine",a.frequency.value=523.25,n.gain.setValueAtTime(0,t.currentTime),n.gain.linearRampToValueAtTime(.3,t.currentTime+.1),n.gain.linearRampToValueAtTime(0,t.currentTime+1.5),a.start(),a.stop(t.currentTime+1.6)}}catch(t){console.error("Error playing sound:",t)}},M=(e,t,n)=>{if(!e||!e.phases||0===e.phases.length)return console.error("Invalid exercise data"),void A();if(t>=e.totalCycles)return T(),s(!1),d(e.totalCycles),c("Complete!"),r(0),void E("complete");const o=e.phases[n];c(o.name),r(o.duration),d(t+1),E(o.name.toLowerCase());let i=o.duration;v.current&&clearInterval(v.current),v.current=setInterval((()=>{if(i-=1,r(i),i<=0){clearInterval(v.current),v.current=null;let s=n+1,o=t;s>=e.phases.length&&(s=0,o+=1),O.current=setTimeout((()=>{a&&M(e,o,s)}),300)}}),1e3)},A=()=>{T(),s(!1),t(null),r(0),c(""),d(0),y(0),j(0)},I="all"===h?S:S.filter((e=>e.category===h)),P=b>0?Math.min(g/b*100,100):0;return Object(N.jsxs)("div",{className:"breathing-exercises",children:[Object(N.jsxs)("h2",{children:[Object(N.jsx)("span",{className:"breathing-title-icon",children:"\ud83e\uddd8"}),"Breathing Exercises"]}),e?Object(N.jsxs)("div",{className:"active-exercise ".concat(e.animationType),style:{background:"linear-gradient(135deg, ".concat(e.color,"20, ").concat(e.color,"05)"),borderLeft:"4px solid ".concat(e.color)},children:[Object(N.jsx)("h3",{children:e.title}),Object(N.jsx)("div",{className:"breathing-animation-container",children:"alternate"===e.animationType?Object(N.jsx)("div",{className:"breathing-circle alternate",children:Object(N.jsxs)("div",{className:"nostril-guide",children:[Object(N.jsx)("div",{className:"face-silhouette"}),Object(N.jsx)("div",{className:"nostril left ".concat(i.includes("Left")?"active":"")}),Object(N.jsx)("div",{className:"nostril right ".concat(i.includes("Right")?"active":"")})]})}):"sphere"===e.animationType?Object(N.jsxs)("div",{className:"breathing-sphere ".concat(i.toLowerCase()),children:[Object(N.jsx)("div",{className:"sphere-inner",children:Object(N.jsx)("div",{className:"counter",children:o})}),Object(N.jsx)("div",{className:"sphere-ripple"})]}):Object(N.jsxs)("div",{className:"breathing-circle ".concat(e.animationType," ").concat(i.toLowerCase()),style:{borderColor:e.color},children:[Object(N.jsx)("div",{className:"counter",children:o}),Object(N.jsx)("div",{className:"breathing-particles-container",children:Array(8).fill(0).map(((t,a)=>Object(N.jsx)("div",{className:"breathing-particle ".concat(i.toLowerCase()),style:{animationDelay:"".concat(.2*a,"s"),transform:"rotate(".concat(45*a,"deg)"),background:e.color}},a)))}),Object(N.jsx)("div",{className:"breath-status",children:i})]})}),Object(N.jsx)("div",{className:"exercise-info",children:e.phases.map(((t,a)=>Object(N.jsxs)("div",{className:"phase-instruction ".concat(i===t.name?"active":""),style:{borderColor:i===t.name?e.color:"transparent",backgroundColor:i===t.name?"".concat(e.color,"15"):"transparent"},children:[Object(N.jsxs)("h4",{children:[t.name," (",t.duration,"s)"]}),Object(N.jsx)("p",{children:t.instruction})]},a)))}),Object(N.jsxs)("div",{className:"progress-container",children:[Object(N.jsx)("div",{className:"progress-bar",children:Object(N.jsx)("div",{className:"progress-fill",style:{width:"".concat(P,"%"),backgroundColor:e.color}})}),Object(N.jsxs)("div",{className:"progress-info",children:[Object(N.jsxs)("span",{children:["Cycle ",l,"/",e.totalCycles]}),Object(N.jsxs)("span",{className:"time-remaining",children:[Math.floor((b-g)/60),":",String(Math.floor((b-g)%60)).padStart(2,"0")," remaining"]})]})]}),Object(N.jsx)("button",{onClick:A,className:"stop-button",style:{backgroundColor:e.color},children:"Stop Exercise"})]}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("p",{className:"breathing-intro",children:"Breathing exercises can help reduce stress, improve focus, and promote relaxation. Select a category to find exercises for your specific needs."}),Object(N.jsx)("div",{className:"category-filter",children:k.map((e=>Object(N.jsx)("button",{className:"category-button ".concat(h===e.id?"active":""),onClick:()=>u(e.id),children:e.name},e.id)))}),Object(N.jsx)("div",{className:"exercises-list",children:I.map((e=>{var n;return Object(N.jsxs)("div",{className:"exercise-card theme-".concat(w),children:[Object(N.jsxs)("div",{className:"exercise-header",children:[Object(N.jsx)("div",{className:"exercise-icon",style:{backgroundColor:"".concat(e.color,"30")},children:Object(N.jsx)("span",{children:e.icon})}),Object(N.jsx)("h3",{children:e.title})]}),Object(N.jsxs)("div",{className:"exercise-meta",children:[Object(N.jsxs)("span",{className:"duration-tag",children:[e.phases.reduce(((e,t)=>e+t.duration),0)*e.totalCycles," seconds"]}),Object(N.jsx)("span",{className:"category-tag",style:{backgroundColor:"".concat(e.color,"30"),color:e.color},children:null===(n=k.find((t=>t.id===e.category)))||void 0===n?void 0:n.name.split(" ")[0]})]}),Object(N.jsx)("p",{children:e.description}),Object(N.jsxs)("div",{className:"exercise-benefits",children:[Object(N.jsx)("div",{className:"benefit-title",children:"Benefits:"}),Object(N.jsx)("ul",{children:e.benefits.slice(0,2).map(((e,t)=>Object(N.jsx)("li",{children:e},t)))})]}),Object(N.jsx)("button",{onClick:()=>(e=>{if(a)return;T(),t(e),s(!0),d(1),c(""),r(0);const n=e.phases.reduce(((e,t)=>e+t.duration),0),o=n*e.totalCycles;p(o),y(0),M(e,0,0),f.current=setInterval((()=>{y((e=>e>=o?(clearInterval(f.current),o):e+.1))}),100)})(e),className:"start-button",style:{backgroundColor:e.color},children:"Start Exercise"})]},e.id)}))}),Object(N.jsxs)("div",{className:"breathing-footer",children:[Object(N.jsx)("h3",{children:"Benefits of Regular Breathing Practice"}),Object(N.jsxs)("div",{className:"benefits-grid",children:[Object(N.jsxs)("div",{className:"benefit-item",children:[Object(N.jsx)("div",{className:"benefit-icon",children:"\ud83e\udde0"}),Object(N.jsx)("h4",{children:"Mental Clarity"}),Object(N.jsx)("p",{children:"Improves focus, concentration and mental performance"})]}),Object(N.jsxs)("div",{className:"benefit-item",children:[Object(N.jsx)("div",{className:"benefit-icon",children:"\ud83d\ude0c"}),Object(N.jsx)("h4",{children:"Stress Reduction"}),Object(N.jsx)("p",{children:"Activates the parasympathetic nervous system to reduce stress"})]}),Object(N.jsxs)("div",{className:"benefit-item",children:[Object(N.jsx)("div",{className:"benefit-icon",children:"\u2764\ufe0f"}),Object(N.jsx)("h4",{children:"Heart Health"}),Object(N.jsx)("p",{children:"Lowers blood pressure and improves heart rate variability"})]}),Object(N.jsxs)("div",{className:"benefit-item",children:[Object(N.jsx)("div",{className:"benefit-icon",children:"\ud83d\udca4"}),Object(N.jsx)("h4",{children:"Better Sleep"}),Object(N.jsx)("p",{children:"Calms the mind and prepares the body for restful sleep"})]})]}),Object(N.jsxs)("div",{className:"breathing-disclaimer",children:[Object(N.jsx)("strong",{children:"Note:"})," If you feel dizzy or uncomfortable during any exercise, stop and return to normal breathing. These exercises complement but do not replace professional medical care."]})]})]})]})};a(31);var L=()=>{const[e,t]=Object(n.useState)([]),[a,s]=Object(n.useState)(""),[o,r]=Object(n.useState)(""),[i,c]=Object(n.useState)(null),[l,d]=Object(n.useState)(!1),[h,u]=Object(n.useState)(""),[m,j]=Object(n.useState)(!1);Object(n.useEffect)((()=>{const e=localStorage.getItem("emergencyContacts");e&&t(JSON.parse(e))}),[]),Object(n.useEffect)((()=>{localStorage.setItem("emergencyContacts",JSON.stringify(e))}),[e]);return Object(N.jsxs)("div",{className:"emergency-contacts",children:[Object(N.jsxs)("h2",{children:[Object(N.jsx)("span",{className:"emergency-icon",children:"\ud83d\udc65"})," Emergency Contacts"]}),Object(N.jsx)("div",{className:"contacts-info",children:Object(N.jsx)("p",{children:"Add people you trust who can be contacted in case of an emergency. These contacts will receive an alert message when you use the SOS button."})}),m&&Object(N.jsx)("div",{className:"success-message",children:Object(N.jsxs)("span",{children:["\u2705 Contact ",null!==i?"updated":"added"," successfully!"]})}),Object(N.jsxs)("div",{className:"contacts-container",children:[e.length>0?Object(N.jsx)("div",{className:"contacts-list",children:e.map(((a,n)=>Object(N.jsxs)("div",{className:"contact-card",children:[Object(N.jsxs)("div",{className:"contact-info",children:[Object(N.jsx)("h3",{children:a.name}),Object(N.jsx)("p",{children:a.phone})]}),Object(N.jsxs)("div",{className:"contact-actions",children:[Object(N.jsx)("button",{className:"test-call-btn",onClick:()=>{return e=a.phone,void(window.location.href="tel:".concat(e));var e},"aria-label":"Call ".concat(a.name),children:Object(N.jsx)("span",{className:"btn-icon",children:"\ud83d\udcde"})}),Object(N.jsx)("button",{className:"edit-contact-btn",onClick:()=>(t=>{s(e[t].name),r(e[t].phone),c(t),d(!0),u("")})(n),"aria-label":"Edit ".concat(a.name),children:Object(N.jsx)("span",{className:"btn-icon",children:"\u270f\ufe0f"})}),Object(N.jsx)("button",{className:"remove-contact-btn",onClick:()=>(a=>{const n=e.filter(((e,t)=>t!==a));t(n)})(n),"aria-label":"Remove ".concat(a.name),children:Object(N.jsx)("span",{className:"btn-icon",children:"\u274c"})})]})]},n)))}):Object(N.jsxs)("div",{className:"no-contacts",children:[Object(N.jsx)("div",{className:"no-contacts-icon",children:"\ud83d\udc64"}),Object(N.jsx)("p",{children:"No emergency contacts added yet"}),Object(N.jsx)("p",{className:"no-contacts-subtitle",children:"Add trusted people who can help during a crisis"})]}),l?Object(N.jsxs)("div",{className:"contact-form-container",children:[Object(N.jsx)("h3",{children:null!==i?"Edit Contact":"Add New Contact"}),Object(N.jsxs)("form",{onSubmit:n=>{if(n.preventDefault(),a.trim())if(o.trim()&&/^[+]?[(]?[0-9]{1,4}[)]?[-\s.]?[0-9]{1,3}[-\s.]?[0-9]{1,4}[-\s.]?[0-9]{1,4}$/.test(o)){if(null!==i){const n=[...e];n[i]={name:a,phone:o},t(n),c(null)}else t([...e,{name:a,phone:o}]);s(""),r(""),u(""),d(!1),j(!0),setTimeout((()=>j(!1)),3e3)}else u("Please enter a valid phone number");else u("Please enter a contact name")},className:"contact-form",children:[h&&Object(N.jsx)("div",{className:"form-error",children:h}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{htmlFor:"contact-name",children:"Name"}),Object(N.jsx)("input",{id:"contact-name",type:"text",value:a,onChange:e=>s(e.target.value),placeholder:"Contact name"})]}),Object(N.jsxs)("div",{className:"form-group",children:[Object(N.jsx)("label",{htmlFor:"contact-phone",children:"Phone Number"}),Object(N.jsx)("input",{id:"contact-phone",type:"tel",value:o,onChange:e=>r(e.target.value),placeholder:"Phone number with country code"}),Object(N.jsx)("small",{className:"phone-format-hint",children:"Format: +1234567890 or 123-456-7890"})]}),Object(N.jsxs)("div",{className:"form-actions",children:[Object(N.jsx)("button",{type:"submit",className:"save-contact-btn",children:null!==i?"Update Contact":"Save Contact"}),Object(N.jsx)("button",{type:"button",className:"cancel-btn",onClick:()=>{s(""),r(""),c(null),d(!1),u("")},children:"Cancel"})]})]})]}):Object(N.jsx)("button",{className:"add-contact-button",onClick:()=>d(!0),children:"+ Add Emergency Contact"})]}),Object(N.jsxs)("div",{className:"sos-guide",children:[Object(N.jsx)("h3",{children:"How to Use SOS Feature"}),Object(N.jsxs)("div",{className:"sos-steps",children:[Object(N.jsxs)("div",{className:"sos-step",children:[Object(N.jsx)("div",{className:"step-number",children:"1"}),Object(N.jsx)("p",{children:"Add your trusted emergency contacts above"})]}),Object(N.jsxs)("div",{className:"sos-step",children:[Object(N.jsx)("div",{className:"step-number",children:"2"}),Object(N.jsx)("p",{children:"In a crisis, tap the SOS button in the app header"})]}),Object(N.jsxs)("div",{className:"sos-step",children:[Object(N.jsx)("div",{className:"step-number",children:"3"}),Object(N.jsx)("p",{children:"Confirm to send emergency text messages to all your contacts"})]})]}),Object(N.jsx)("div",{className:"sos-note",children:Object(N.jsxs)("p",{children:[Object(N.jsx)("strong",{children:"Note:"})," The SOS feature will open your phone's messaging app with pre-written emergency texts. You'll need to manually send the messages."]})})]})]})};const q=(e,t)=>{if(!e||!t)return console.error("Phone number and message are required to send SMS."),!1;const a=/iPhone|iPad|iPod/.test(navigator.userAgent);/Android/.test(navigator.userAgent);try{const n=encodeURIComponent(t);let s;return s=a?"sms:".concat(e,"&body=").concat(n):"sms:".concat(e,"?body=").concat(n),console.log("Opening SMS link: ".concat(s)),window.location.href=s,!0}catch(n){return console.error("Error sending SMS:",n),!1}};a(32);var D=e=>{let{className:t}=e;const[a,s]=Object(n.useState)(!1),[o,r]=Object(n.useState)(!1),[i,l]=Object(n.useState)(!1),[d,h]=Object(n.useState)(!1),u=Object(c.g)();Object(n.useEffect)((()=>{const e=()=>{const e=localStorage.getItem("emergencyContacts"),t=e?JSON.parse(e):[];h(t.length>0)};e();const t=t=>{"emergencyContacts"===t.key&&e()};return window.addEventListener("storage",t),()=>{window.removeEventListener("storage",t)}}),[]);return Object(N.jsxs)("div",{className:"sos-container ".concat(t||""),children:[Object(N.jsx)("button",{onClick:()=>{d?s(!0):u.push("/emergency-contacts")},className:"sos-button ".concat(d?"":"sos-add"),title:d?"Send emergency SOS":"Add emergency contacts first",children:d?"SOS":"+ SOS"}),a&&Object(N.jsx)("div",{className:"sos-confirm",children:o||i?o?Object(N.jsxs)("div",{className:"sos-sending",children:[Object(N.jsx)("div",{className:"sending-spinner"}),Object(N.jsx)("p",{children:"Preparing emergency messages..."})]}):i?Object(N.jsxs)("div",{className:"sos-sent",children:[Object(N.jsx)("div",{className:"sent-icon",children:"\u2713"}),Object(N.jsx)("p",{children:"Messages ready to send!"}),Object(N.jsx)("small",{className:"sent-note",children:"Please confirm each message in your messaging app"})]}):null:Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{className:"sos-confirm-header",children:[Object(N.jsx)("span",{className:"sos-alert-icon",children:"\u26a0\ufe0f"}),Object(N.jsx)("h3",{children:"Send Emergency Alert?"})]}),Object(N.jsx)("p",{children:"This will prepare SMS messages to your emergency contacts asking for immediate help."}),Object(N.jsxs)("div",{className:"sos-confirm-buttons",children:[Object(N.jsx)("button",{onClick:()=>{r(!0);const e=localStorage.getItem("emergencyContacts"),t=e?JSON.parse(e):[],a=(new Date).toLocaleString(),n="EMERGENCY SOS - I need help right now at ".concat("unknown location",". This message was sent from my MindMatters app at ").concat(a,". Please try to contact me or emergency services if you can't reach me.");setTimeout((()=>{if(t.length>0)if(/iPhone|iPad|iPod/.test(navigator.userAgent)){const e=t.map((e=>e.phone)).join(",");q(e,n)}else t.forEach(((e,t)=>{setTimeout((()=>{try{q(e.phone,n)}catch(t){console.error("Failed to send SOS to ".concat(e.name,":"),t)}}),300*t)}));r(!1),l(!0),setTimeout((()=>{s(!1),l(!1)}),3e3)}),800)},className:"confirm-button",children:"Yes, Send Alert"}),Object(N.jsx)("button",{onClick:()=>{s(!1)},className:"cancel-button",children:"Cancel"})]})]})})]})};const B=[{quote:"The mind is everything. What you think you become.",author:"Buddha"},{quote:"Your task is not to seek love, but merely to seek and find all the barriers within yourself that you have built against it.",author:"Rumi"},{quote:"Happiness is not something ready-made. It comes from your own actions.",author:"Dalai Lama"},{quote:"The greatest glory in living lies not in never falling, but in rising every time we fall.",author:"Nelson Mandela"},{quote:"In the midst of winter, I found there was, within me, an invincible summer.",author:"Albert Camus"},{quote:"It is during our darkest moments that we must focus to see the light.",author:"Aristotle"},{quote:"You are never too old to set another goal or to dream a new dream.",author:"C.S. Lewis"},{quote:"Peace begins with a smile.",author:"Mother Teresa"},{quote:"The future depends on what you do today.",author:"Mahatma Gandhi"},{quote:"What you get by achieving your goals is not as important as what you become by achieving your goals.",author:"Zig Ziglar"},{quote:"When we are no longer able to change a situation, we are challenged to change ourselves.",author:"Viktor Frankl"},{quote:"Live in the sunshine, swim the sea, drink the wild air.",author:"Ralph Waldo Emerson"}];a(38);var F=()=>{const[e,t]=Object(n.useState)({quote:"",author:"",tags:"",authorBio:"",loading:!0,error:!1,source:null}),[a,s]=Object(n.useState)(!1),[o,r]=Object(n.useState)(navigator.onLine),[i,c]=Object(n.useState)(!1),[d,h]=Object(n.useState)(!1);Object(n.useEffect)((()=>{const e=()=>r(!0),t=()=>r(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}),[]);const u=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!a){s(!0),t((e=>Object(l.a)(Object(l.a)({},e),{},{loading:!0})));try{const a=await async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=(new Date).toDateString(),a=localStorage.getItem("dailyQuote");if(!e&&a)try{const e=JSON.parse(a);if(localStorage.getItem("quoteDate")===t)return console.log("Using cached quote for today"),Object(l.a)(Object(l.a)({},e),{},{success:!0,source:"cache"})}catch(r){console.error("Error reading cached quote",r)}const n=[{name:"quotable",url:"https://api.quotable.kurokeita.dev/api/quotes/random",parser:e=>({quote:e.quote.content,author:e.quote.author.name,tags:e.quote.tags.map((e=>e.name)).join(", "),authorBio:e.quote.author.bio||""})},{name:"zenquotes",url:"https://api.zenquotes.io/v1/random",parser:e=>({quote:e[0].q,author:e[0].a})},{name:"quotable-legacy",url:"https://api.quotable.io/random",parser:e=>({quote:e.content,author:e.author})},{name:"type.fit",url:"https://type.fit/api/quotes",parser:e=>{const t=e[Math.floor(Math.random()*e.length)];return{quote:t.text,author:t.author||"Unknown"}}},{name:"quoteGarden",url:"https://quote-garden.onrender.com/api/v3/quotes/random",parser:e=>({quote:e.data[0].quoteText,author:e.data[0].quoteAuthor})}];for(const c of n)try{if(!navigator.onLine)throw new Error("You are offline");console.log("Trying to fetch quote from ".concat(c.name,"..."));const e=await fetch(c.url,{signal:AbortSignal.timeout(5e3)});if(!e.ok)throw new Error("Failed with status ".concat(e.status));const a=await e.json(),n=c.parser(a);if(n.quote&&n.author)return localStorage.setItem("dailyQuote",JSON.stringify(n)),localStorage.setItem("quoteDate",t),console.log("Successfully fetched quote from ".concat(c.name)),Object(l.a)(Object(l.a)({},n),{},{success:!0,source:c.name});throw new Error("Invalid quote data format")}catch(i){console.warn("Failed to fetch from ".concat(c.name,":"),i)}console.log("All APIs failed, using fallback quote");const s=Math.floor(Math.random()*B.length),o=B[s];return Object(l.a)(Object(l.a)({},o),{},{success:!1,source:"fallback",error:"Could not connect to quote services"})}(e);t({quote:a.quote,author:a.author,tags:a.tags||"",authorBio:a.authorBio||"",loading:!1,error:!a.success,source:a.source})}catch(n){console.error("Error fetching quote:",n),t({quote:"Take a deep breath and try again.",author:"MindMatters",tags:"",authorBio:"",loading:!1,error:!0,source:"error"})}finally{s(!1)}}};Object(n.useEffect)((()=>{const e=localStorage.getItem("dailyQuote"),a=localStorage.getItem("quoteDate"),n=(new Date).toDateString();if(e&&a===n)try{const a=JSON.parse(e);t(Object(l.a)(Object(l.a)({},a),{},{loading:!1,source:"cache"}))}catch(s){u()}else u()}),[]),Object(n.useEffect)((()=>{!e.loading&&e.quote&&(localStorage.setItem("dailyQuote",JSON.stringify({quote:e.quote,author:e.author,tags:e.tags,authorBio:e.authorBio})),localStorage.setItem("quoteDate",(new Date).toDateString()))}),[e]);return Object(N.jsxs)("div",{className:"daily-quote",children:[Object(N.jsxs)("h2",{children:["\ud83e\udde0 Daily Inspiration",!o&&Object(N.jsx)("span",{className:"offline-indicator",children:"Offline Mode"})]}),Object(N.jsx)("div",{className:"quote-content ".concat(e.loading?"loading":""),children:e.loading?Object(N.jsxs)("div",{className:"quote-loading",children:[Object(N.jsx)("div",{className:"quote-spinner"}),Object(N.jsx)("p",{children:"Finding inspiration..."})]}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("blockquote",{children:[Object(N.jsxs)("p",{children:['"',e.quote,'"']}),Object(N.jsxs)("footer",{children:[Object(N.jsxs)("span",{className:"author-name ".concat(e.authorBio?"has-bio":""),onClick:e.authorBio?()=>{h(!d)}:void 0,children:["\u2014 ",e.author,e.authorBio&&Object(N.jsx)("span",{className:"info-icon",children:"\u2139\ufe0f"})]}),"fallback"===e.source&&Object(N.jsx)("span",{className:"offline-quote",children:"(offline quote)"})]}),e.tags&&Object(N.jsx)("div",{className:"quote-tags",children:e.tags.split(", ").map((e=>Object(N.jsx)("span",{className:"quote-tag",children:e},e)))}),d&&e.authorBio&&Object(N.jsxs)("div",{className:"author-bio",children:[Object(N.jsx)("h4",{children:e.author}),Object(N.jsx)("p",{children:e.authorBio})]})]}),Object(N.jsxs)("div",{className:"quote-actions",children:[Object(N.jsxs)("button",{onClick:()=>u(!0),className:"refresh-quote",disabled:a||!o,"aria-label":"Get a new quote",children:[Object(N.jsx)("span",{className:"refresh-icon ".concat(a?"spinning":""),children:"\u21bb"}),Object(N.jsx)("span",{className:"refresh-text",children:a?"Loading...":"New Quote"})]}),Object(N.jsxs)("button",{onClick:()=>{const t='"'.concat(e.quote,'" \u2014 ').concat(e.author);navigator.clipboard.writeText(t).then((()=>{c(!0),setTimeout((()=>c(!1)),2e3)})).catch((e=>console.error("Failed to copy: ",e)))},className:"copy-quote","aria-label":"Copy quote to clipboard",children:[Object(N.jsx)("span",{className:"copy-icon",children:"\ud83d\udccb"}),Object(N.jsx)("span",{className:"copy-text",children:i?"Copied!":"Copy"})]})]})]})})]})};a(39);M.c.register(...M.j);var R=()=>{const[e,t]=Object(n.useState)(null),[a,s]=Object(n.useState)(!0),[o,r]=Object(n.useState)(null),[i,c]=Object(n.useState)(null),[d,h]=Object(n.useState)([]),[u,m]=Object(n.useState)("bar");Object(n.useEffect)((()=>{(async()=>{s(!0);try{const e=await j(),a=await y(e.latitude,e.longitude);t(a);const n=await b();h(n);const s=(e=>{if(!e||e.length<3)return{hasEnoughData:!1,message:"We need more mood entries to analyze weather patterns. Keep logging your moods!"};const t={sunny:{entries:[],avgMood:0},cloudy:{entries:[],avgMood:0},rainy:{entries:[],avgMood:0},snowy:{entries:[],avgMood:0}};e.forEach((e=>{if(!e.weather)return;const a=e.weather.weatherCode;0===a||1===a?t.sunny.entries.push(e):2===a||3===a?t.cloudy.entries.push(e):a>=51&&a<=67||a>=80&&a<=82?t.rainy.entries.push(e):(a>=71&&a<=77||a>=85&&a<=86)&&t.snowy.entries.push(e)})),Object.keys(t).forEach((e=>{const a=t[e];if(a.entries.length>0){const e=a.entries.reduce(((e,t)=>e+t.moodValue),0);a.avgMood=parseFloat((e/a.entries.length).toFixed(1)),a.count=a.entries.length}}));const a=[];let n=null,s=0,o=null,r=11;if(Object.keys(t).forEach((e=>{const a=t[e];a.entries.length>=2&&(a.avgMood>s&&(s=a.avgMood,n=e),a.avgMood<r&&(r=a.avgMood,o=e))})),n&&a.push({type:"positive",text:"You tend to feel better on ".concat(n," days (average mood: ").concat(s,"/10).")}),o&&o!==n&&a.push({type:"negative",text:"You tend to feel lower on ".concat(o," days (average mood: ").concat(r,"/10).")}),n&&o&&n!==o){const e=s-r;e>=2&&a.push({type:"significant",text:"Weather seems to have a significant impact on your mood (".concat(e.toFixed(1)," points difference).")})}return{hasEnoughData:!0,weatherMoodGroups:t,insights:a,bestWeather:n,worstWeather:o}})(n);c(s)}catch(e){console.error("Failed to load weather or mood data:",e),r("Could not load weather or mood data. Please check your internet connection and try again.")}finally{s(!1)}})()}),[]);const j=()=>new Promise((e=>{const t={latitude:40.7128,longitude:-74.006};if(!navigator.geolocation)return void e(t);const a=setTimeout((()=>{e(t)}),5e3);navigator.geolocation.getCurrentPosition((t=>{clearTimeout(a),e({latitude:t.coords.latitude,longitude:t.coords.longitude})}),(()=>{clearTimeout(a),e(t)}))})),p=()=>{if(!i||!i.hasEnoughData)return null;const e=Object.keys(i.weatherMoodGroups).filter((e=>i.weatherMoodGroups[e].entries.length>0)),t=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.7;return{sunny:"rgba(255, 194, 14, ".concat(t,")"),cloudy:"rgba(164, 175, 196, ".concat(t,")"),rainy:"rgba(86, 141, 198, ".concat(t,")"),snowy:"rgba(219, 234, 254, ".concat(t,")")}[e]||"rgba(150, 150, 150, ".concat(t,")")};return{labels:e.map((e=>e.charAt(0).toUpperCase()+e.slice(1))),datasets:[{label:"Average Mood (1-10)",data:e.map((e=>i.weatherMoodGroups[e].avgMood)),backgroundColor:e.map((e=>t(e))),borderColor:e.map((e=>t(e,1))),borderWidth:1,borderRadius:6,hoverBackgroundColor:e.map((e=>t(e,.9)))}]}},g=()=>{const e={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(255, 255, 255, 0.9)",titleColor:"#333",bodyColor:"#555",borderColor:"#ddd",borderWidth:1,padding:10,displayColors:!1,callbacks:{title:function(e){return"".concat(e[0].label," Weather")},label:function(e){return"Average Mood: ".concat(e.parsed.y.toFixed(1),"/10")},afterLabel:function(e){const t=e.dataIndex,a=Object.keys(i.weatherMoodGroups)[t],n=i.weatherMoodGroups[a].count||0;return"Based on ".concat(n," entries")}}}}};return"bar"===u?Object(l.a)(Object(l.a)({},e),{},{scales:{y:{beginAtZero:!1,min:1,max:10,ticks:{stepSize:1,color:"#666"},grid:{color:"rgba(0, 0, 0, 0.05)"},title:{display:!0,text:"Mood Level",color:"#555",font:{weight:"bold"}}},x:{grid:{display:!1},ticks:{color:"#666"}}},animation:{duration:2e3,easing:"easeOutQuart"}}):Object(l.a)(Object(l.a)({},e),{},{scales:{r:{min:1,max:10,ticks:{stepSize:1,color:"#666",backdropColor:"transparent"},angleLines:{color:"rgba(0, 0, 0, 0.1)"},grid:{color:"rgba(0, 0, 0, 0.1)"},pointLabels:{color:"#333",font:{size:12}}}}})},x=e=>"".concat(Math.round(e),"\xb0C");return Object(N.jsxs)("div",{className:"weather-mood",children:[Object(N.jsx)("h2",{children:"Weather & Mood Insights"}),a?Object(N.jsxs)("div",{className:"weather-loading",children:[Object(N.jsx)("div",{className:"weather-spinner"}),Object(N.jsx)("p",{children:"Loading weather data and analyzing your mood patterns..."})]}):o?Object(N.jsxs)("div",{className:"weather-error",children:[Object(N.jsx)("p",{children:o}),Object(N.jsx)("button",{onClick:()=>window.location.reload(),className:"reload-button",children:"Try Again"})]}):Object(N.jsxs)(N.Fragment,{children:[e&&e.current&&Object(N.jsxs)("div",{className:"current-weather",children:[Object(N.jsx)("div",{className:"weather-icon-large",children:O(e.current.weather_code,e.current.is_day)}),Object(N.jsxs)("div",{className:"weather-details",children:[Object(N.jsx)("h3",{children:"Current Weather"}),Object(N.jsx)("div",{className:"weather-temp",children:x(e.current.temperature_2m)}),Object(N.jsx)("div",{className:"weather-desc",children:(f=e.current.weather_code,{0:"Clear sky",1:"Mainly clear",2:"Partly cloudy",3:"Overcast",45:"Fog",48:"Depositing rime fog",51:"Light drizzle",53:"Moderate drizzle",55:"Dense drizzle",56:"Light freezing drizzle",57:"Dense freezing drizzle",61:"Slight rain",63:"Moderate rain",65:"Heavy rain",66:"Light freezing rain",67:"Heavy freezing rain",71:"Slight snow fall",73:"Moderate snow fall",75:"Heavy snow fall",77:"Snow grains",80:"Slight rain showers",81:"Moderate rain showers",82:"Violent rain showers",85:"Slight snow showers",86:"Heavy snow showers",95:"Thunderstorm",96:"Thunderstorm with slight hail",99:"Thunderstorm with heavy hail"}[f]||"Unknown")}),Object(N.jsxs)("div",{className:"weather-meta",children:[Object(N.jsxs)("span",{children:["Feels like ",x(e.current.apparent_temperature)]}),Object(N.jsxs)("span",{children:["\u2022 Humidity: ",e.current.relative_humidity_2m,"%"]}),Object(N.jsxs)("span",{className:"cached-indicator",children:["Updated ",(()=>{if(!e||!e.timestamp)return"";const t=Date.now()-e.timestamp,a=Math.floor(t/6e4);if(a<1)return"just now";if(1===a)return"1 minute ago";if(a<60)return"".concat(a," minutes ago");const n=Math.floor(a/60);if(1===n)return"1 hour ago";if(n<24)return"".concat(n," hours ago");const s=Math.floor(n/24);return 1===s?"yesterday":"".concat(s," days ago")})()]})]})]})]}),Object(N.jsxs)("div",{className:"mood-weather-analysis",children:[Object(N.jsx)("h3",{children:"How Weather Affects Your Mood"}),i&&i.hasEnoughData?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{className:"chart-type-toggle",children:[Object(N.jsx)("button",{className:"chart-type-btn ".concat("bar"===u?"active":""),onClick:()=>m("bar"),children:"Bar Chart"}),Object(N.jsx)("button",{className:"chart-type-btn ".concat("radar"===u?"active":""),onClick:()=>m("radar"),children:"Radar Chart"})]}),Object(N.jsx)("div",{className:"chart-container",children:"bar"===u?Object(N.jsx)(A.a,{data:p(),options:g()}):Object(N.jsx)(M.c,{type:"radar",data:p(),options:g()})}),Object(N.jsxs)("div",{className:"insights-container",children:[Object(N.jsx)("h4",{children:"Insights"}),Object(N.jsxs)("ul",{className:"insights-list",children:[i.insights.map(((e,t)=>Object(N.jsx)("li",{className:"insight-item insight-".concat(e.type),children:e.text},t))),0===i.insights.length&&Object(N.jsx)("li",{className:"insight-item insight-neutral",children:"Weather doesn't appear to have a strong effect on your mood based on current data."})]})]})]}):Object(N.jsxs)("div",{className:"no-data-message",children:[Object(N.jsx)("p",{children:(null===i||void 0===i?void 0:i.message)||"Not enough data to analyze weather effects on your mood yet."}),Object(N.jsx)("p",{children:"Keep logging your daily entries to see patterns emerge!"})]})]}),Object(N.jsxs)("div",{className:"weather-tips",children:[Object(N.jsx)("h4",{children:"Weather Wellness Tips"}),e&&e.current&&Object(N.jsxs)("div",{className:"tips-container",children:[e.current.weather_code<=1&&Object(N.jsxs)("p",{children:["\u2600\ufe0f ",Object(N.jsx)("strong",{children:"Sunny day tip:"})," Sunshine boosts vitamin D production, which can improve mood. Consider spending 15-20 minutes outside."]}),e.current.weather_code>=2&&e.current.weather_code<=3&&Object(N.jsxs)("p",{children:["\u2601\ufe0f ",Object(N.jsx)("strong",{children:"Cloudy day tip:"})," Cloudy days can sometimes affect mood. Try brightening your environment with good lighting."]}),e.current.weather_code>=51&&e.current.weather_code<=67&&Object(N.jsxs)("p",{children:["\ud83c\udf27\ufe0f ",Object(N.jsx)("strong",{children:"Rainy day tip:"})," The sound of rain can be calming. Consider mindful listening or using the day for cozy indoor activities."]}),e.current.weather_code>=71&&e.current.weather_code<=86&&Object(N.jsxs)("p",{children:["\u2744\ufe0f ",Object(N.jsx)("strong",{children:"Snowy day tip:"})," Cold weather can make us less active. Try to maintain physical movement indoors."]}),e.current.weather_code>=95&&Object(N.jsxs)("p",{children:["\u26c8\ufe0f ",Object(N.jsx)("strong",{children:"Stormy day tip:"})," Storms can trigger anxiety in some people. Practice deep breathing exercises if you feel anxious."]}),Object(N.jsx)("p",{className:"general-tip",children:"Being aware of how weather affects your mood can help you prepare and adapt your self-care routines."})]})]})]})]});var f};let W=null,_=0;const H=[{country:"Algeria",countryCode:"DZ",hotlines:[{name:"National Police",phone:"17",description:"National police emergency number in Algeria"},{name:"National Ambulance",phone:"43",description:"National ambulance emergency number in Algeria"},{name:"Fire Brigade",phone:"14",description:"National fire brigade number in Algeria"},{name:"National Gendarmerie",phone:"1055",description:"National gendarmerie number in Algeria"},{name:"Suicide Hotline Algeria",phone:"0021 3983 2000 58",description:"Crisis support service in Algeria"}]},{country:"Argentina",countryCode:"AR",hotlines:[{name:"National Emergency Number",phone:"911",description:"National emergency number in Argentina"},{name:"Centro de Asistencia al Suicida",phone:"135",altPhone:"5275-1135",description:"Crisis support for Greater Buenos Aires and rest of the country",website:"https://www.asistencialsuicida.org.ar/"},{name:"SOS Un Amigo Anonimo",phone:"5263-0583",description:"Available Monday to Friday from 10am to 7pm and Saturdays from 10am to 4pm"}]},{country:"Armenia",countryCode:"AM",hotlines:[{name:"National Emergency Number",phone:"112",altPhone:"911",description:"National emergency numbers in Armenia"},{name:"Trust Social Work and Sociological Research Centre",phone:"(2) 538194",altPhone:"(2) 538197",description:"Crisis support service in Armenia"}]},{country:"Australia",countryCode:"AU",hotlines:[{name:"National Emergency Number",phone:"000",altPhone:"112",description:"National emergency numbers in Australia"},{name:"Lifeline",phone:"13 11 14",description:"24-hour nationwide service for crisis support, suicide prevention and mental health support",website:"https://www.lifeline.org.au/"},{name:"Kids Helpline",phone:"1800 55 1800",description:"24-hour support for Australians aged 5-25",website:"https://kidshelpphone.ca/"},{name:"Beyond Blue",phone:"1300 224 636",description:"24/7 information and support for anxiety, depression, and suicide",website:"https://www.beyondblue.org.au/"},{name:"Suicide Call Back Service",phone:"1300 659 467",description:"Professional 24/7 telephone and online counselling",website:"https://www.suicidecallbackservice.org.au/"}]},{country:"Austria",countryCode:"AT",hotlines:[{name:"National Emergency Number",phone:"112",description:"National emergency number in Austria"},{name:"Telefonseelsorge",phone:"142",description:"Free of charge emotional support, operating 24 hours a day",website:"https://www.telefonseelsorge.at/"},{name:"Rat auf Draht",phone:"147",description:"Crisis support for children, juveniles and their attachment figures, 24/7",website:"https://www.rataufdraht.at/"}]},{country:"Bangladesh",countryCode:"BD",hotlines:[{name:"National Emergency Number",phone:"999",description:"National emergency number in Bangladesh"},{name:"Kaan Pete Roi",phone:"+88 09612 119911",description:"Emotional support helpline for people with feelings of despair, isolation, distress or suicidal feelings",website:"https://shuni.org/"}]},{country:"Brazil",countryCode:"BR",hotlines:[{name:"National Emergency Number",phone:"190",description:"National emergency number in Brazil"},{name:"National Suicide Hotline",phone:"188",description:"National suicide prevention hotline in Brazil"},{name:"Centro de Valoriza\xe7\xe3o da Vida",phone:"188",description:"Emotional and suicidal prevention support, 24/7",website:"https://www.cvv.org.br/"},{name:"TouchPeace",description:"Free emotional support via video call, available 24/7",website:"https://www.touchpeace.org/"}]},{country:"Canada",countryCode:"CA",hotlines:[{name:"National Emergency Number",phone:"911",description:"National emergency number in Canada"},{name:"Suicide Crisis Helpline",phone:"988",description:"24/7 suicide crisis helpline in both English and French",website:"https://www.canada.ca/en/public-health/services/suicide-prevention/warning-signs.html"},{name:"Kids Help Phone",phone:"1-800-668-6868",altPhone:"Text CONNECT to 686868",description:"24/7 national support service for youth in English and French",website:"https://kidshelpphone.ca/"},{name:"Talk Suicide Canada",phone:"1-833-456-4566",altPhone:"Text 45645",description:"Nationwide suicide prevention service, 24/7",website:"https://talksuicide.ca/"},{name:"Trans Lifeline",phone:"1-877-330-6366",description:"Crisis hotline for transgender people, staffed by transgender individuals",website:"http://www.translifeline.org/"}]},{country:"China",countryCode:"CN",hotlines:[{name:"Police Emergency",phone:"110",description:"National police emergency number in China"},{name:"Ambulance Emergency",phone:"120",description:"National ambulance emergency number in China"},{name:"Beijing Suicide Research and Prevention Center",phone:"800-810-1117",altPhone:"010-8295-1332",description:"24/7 suicide prevention service",website:"http://www.crisis.org.cn"},{name:"Lifeline China",phone:"400 821 1215",description:"Available 10am to 10pm every day",website:"https://www.lifelinechina.org/"}]},{country:"France",countryCode:"FR",hotlines:[{name:"National Emergency Number",phone:"112",description:"National emergency number in France"},{name:"Suicide Prevention Hotline",phone:"3114",description:"National suicide prevention hotline, 24/7",website:"https://3114.fr/"},{name:"SOS Amiti\xe9",phone:"09 72 39 40 50",description:"Distress listening service on multimedia platform: phone, email, chat",website:"https://www.sos-amitie.com/"}]},{country:"Germany",countryCode:"DE",hotlines:[{name:"National Emergency Number",phone:"112",description:"National emergency number for fire and ambulance in Germany"},{name:"Police Emergency",phone:"110",description:"National emergency number for police in Germany"},{name:"Telefonseelsorge",phone:"0800 111 0 111",altPhone:"0800 111 0 222",description:"24/7 telephone counseling service",website:"http://www.telefonseelsorge.de/"}]},{country:"India",countryCode:"IN",hotlines:[{name:"National Emergency Number",phone:"112",description:"National emergency number in India"},{name:"Kiran Mental Health Helpline",phone:"1800-599-0019",description:"24/7 toll-free helpline for suicidal thoughts, depression and mental health issues"},{name:"AASRA",phone:"+91-22-27546669",description:"24/7 voluntary, professional and confidential services",website:"http://www.aasra.info/"},{name:"Vandrevala Foundation",phone:"+91 9999666555",description:"24/7 helpline for psychological counselling and crisis intervention",website:"http://www.vandrevalafoundation.com"}]},{country:"Ireland",countryCode:"IE",hotlines:[{name:"National Emergency Number",phone:"112",altPhone:"999",description:"National emergency numbers in Ireland"},{name:"Samaritans",phone:"116 123",description:"Free emotional support to anyone in distress or at risk of suicide",website:"http://www.samaritans.org/"},{name:"Text Crisis Service",phone:"Text HELLO to 50808",description:"Free, confidential 24/7 national crisis-intervention text-message service",website:"https://text50808.ie/"}]},{country:"Japan",countryCode:"JP",hotlines:[{name:"National Emergency Number",phone:"110",altPhone:"119",description:"National emergency numbers in Japan"},{name:"TELL Lifeline",phone:"03-5774-0992",description:"English-language counseling service",website:"http://telljp.com/lifeline/"},{name:"Federation of Inochi No Denwa",phone:"0120-783-556",description:"Japanese-language suicide prevention hotline",website:"https://www.inochinodenwa.org/"}]},{country:"South Africa",countryCode:"ZA",hotlines:[{name:"National Emergency Number (Police)",phone:"10111",description:"National police emergency number in South Africa"},{name:"National Emergency Number (Ambulance)",phone:"10177",description:"National ambulance emergency number in South Africa"},{name:"Suicide Crisis Line",phone:"0800 567 567",altPhone:"SMS 31393",description:"Crisis support for suicidal individuals"},{name:"South African Depression and Anxiety Group",phone:"0800 456 789",altPhone:"0800 567 567",description:"Suicide crisis helpline, 8am-8pm daily",website:"https://www.sadag.org/"}]},{country:"United Kingdom",countryCode:"GB",hotlines:[{name:"National Emergency Number",phone:"999",altPhone:"112",description:"National emergency numbers in the United Kingdom"},{name:"Samaritans",phone:"116 123",description:"24/7 support for anyone in distress or at risk of suicide",website:"http://www.samaritans.org/"},{name:"CALM (Campaign Against Living Miserably)",phone:"0800 58 58 58",description:"Helpline for men, open 5pm-midnight every day",website:"https://www.thecalmzone.net/"},{name:"SHOUT",phone:"Text SHOUT to 85258",description:"UK's free 24/7 text service for anyone in crisis",website:"https://www.giveusashout.org/"},{name:"PAPYRUS Prevention of Young Suicide",phone:"0800 068 4141",altPhone:"Text 07860039967",description:"Support for young people struggling with suicidal thoughts",website:"https://www.papyrus-uk.org/"}]},{country:"United States",countryCode:"US",hotlines:[{name:"National Emergency Number",phone:"911",description:"National emergency number in the United States"},{name:"988 Suicide & Crisis Lifeline",phone:"988",altPhone:"1-800-273-8255",description:"24/7 free support for people in suicidal crisis or emotional distress",website:"https://988lifeline.org/"},{name:"Crisis Text Line",phone:"Text HOME to 741741",description:"24/7 crisis-intervention text-message service",website:"https://www.crisistextline.org/"},{name:"Veterans Crisis Line",phone:"988, then Press 1",altPhone:"1-800-273-8255, Press 1",description:"Crisis support for military veterans and their families",website:"https://www.veteranscrisisline.net/"},{name:"The Trevor Project",phone:"1-866-488-7386",altPhone:"Text START to 678-678",description:"Crisis support for LGBTQ+ youth",website:"http://www.thetrevorproject.org/"},{name:"Trans Lifeline",phone:"1-877-565-8860",description:"Crisis hotline for transgender people, staffed by transgender individuals",website:"https://www.translifeline.org/"}]},{country:"International",countryCode:"INTL",hotlines:[{name:"International Association for Suicide Prevention",description:"Find crisis centers around the world",website:"https://www.iasp.info/resources/Crisis_Centres/"},{name:"Befrienders Worldwide",description:"Global network of helplines providing emotional support",website:"https://www.befrienders.org/"}]}];var V=H;const z="wikiHotlinesCache",U=async function(){return{hotlines:V,source:"static",wikiSuccess:!1,error:"Using reliable local database only"}},J=()=>(()=>{const e=localStorage.getItem(z);if(!e)return{timestamp:null,age:null,exists:!1};const{timestamp:t}=JSON.parse(e),a=Date.now()-t,n=Math.floor(a/864e5);return{timestamp:new Date(t).toLocaleString(),age:0===n?"today":1===n?"yesterday":"".concat(n," days ago"),exists:!0}})(),G=(e,t)=>{if(!t||!e||!Array.isArray(e))return null;const a=t.toUpperCase();return e.find((e=>e.countryCode===a))||e.find((e=>"INTL"===e.countryCode))},Y=e=>e&&Array.isArray(e)?e.map((e=>({name:e.country,code:e.countryCode}))):[];a(40);var K=()=>{const[e,t]=Object(n.useState)(null),[a,s]=Object(n.useState)(null),[o,r]=Object(n.useState)([]),[i,c]=Object(n.useState)([]),[l,d]=Object(n.useState)(!0),[h,u]=Object(n.useState)(null),[m,j]=Object(n.useState)(null),[b,p]=Object(n.useState)(null),[g,y]=Object(n.useState)(null),[O,x]=Object(n.useState)(!1);Object(n.useEffect)((()=>{(async()=>{d(!0);try{const e=await(async()=>{if(W&&Date.now()-_<864e5)return W;try{if(!navigator.onLine){const e=localStorage.getItem("userCountry");if(e)return JSON.parse(e);throw new Error("Offline and no cached location data")}const e=await fetch("https://ipapi.co/json/",{signal:AbortSignal.timeout(5e3)});if(!e.ok)throw new Error("Geolocation API error: ".concat(e.status));const t=await e.json();return W={country:t.country_name,countryCode:t.country_code,city:t.city,region:t.region,source:"api"},_=Date.now(),localStorage.setItem("userCountry",JSON.stringify(W)),W}catch(i){return console.error("Failed to detect country:",i),{country:"United States",countryCode:"US",source:"default"}}})();t(e);const{hotlines:a,source:n,wikiSuccess:o,error:i}=await U();c(a),p({source:n,wikiSuccess:o,error:i});const l=J();y(l);const d=Y(a);r(d);const h=(null===e||void 0===e?void 0:e.countryCode)||(d.length>0?d[0].code:null);if(j(h),h){const e=G(a,h);s(e)}}catch(e){console.error("Error fetching hotline data:",e),u("Could not retrieve crisis hotlines. Please check your connection.")}finally{d(!1)}})()}),[]);const f=e=>{e&&!e.toLowerCase().startsWith("text")&&(window.location.href="tel:".concat(e.replace(/\s+/g,"")))};return Object(N.jsxs)("div",{className:"crisis-hotlines",children:[Object(N.jsxs)("h2",{children:[Object(N.jsx)("span",{className:"emergency-icon",children:"\ud83c\udd98"}),"Emergency Crisis Hotlines"]}),l?Object(N.jsxs)("div",{className:"hotlines-loading",children:[Object(N.jsx)("div",{className:"hotlines-spinner"}),Object(N.jsx)("p",{children:"Finding emergency resources for your location..."})]}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsxs)("div",{className:"country-selection",children:[Object(N.jsxs)("div",{className:"country-selector",children:[Object(N.jsxs)("label",{htmlFor:"country-select",children:["Select your country:",e&&"api"===e.source&&Object(N.jsxs)("span",{className:"detected-country",children:["(Detected: ",e.country,")"]})]}),Object(N.jsx)("select",{id:"country-select",value:m||"",onChange:e=>{const t=e.target.value;j(t);const a=G(i,t);s(a)},children:o.map((e=>Object(N.jsx)("option",{value:e.code,children:e.name},e.code)))})]}),Object(N.jsx)("div",{className:"data-source-info",children:b&&Object(N.jsxs)("div",{className:"data-source ".concat(b.wikiSuccess?"wiki-success":"wiki-error"),children:[Object(N.jsxs)("span",{children:["Source: ",b.wikiSuccess?"Wikipedia + Local Database":"Local Database Only"]}),g&&g.exists&&Object(N.jsxs)("span",{className:"cache-age",children:["Updated: ",g.age]}),Object(N.jsxs)("button",{onClick:async()=>{if(!O){x(!0);try{const{hotlines:e,source:t,wikiSuccess:a,error:n}=await U(!0);c(e),p({source:t,wikiSuccess:a,error:n});const o=J();y(o);const i=Y(e);if(r(i),m){const t=G(e,m);s(t)}u("Crisis hotlines updated successfully!"),setTimeout((()=>u(null)),3e3)}catch(e){console.error("Error refreshing hotline data:",e),u("Failed to refresh crisis hotlines. Please check your connection.")}finally{x(!1)}}},disabled:O||!navigator.onLine,className:"refresh-button",title:"Update crisis hotlines from Wikipedia",children:[Object(N.jsx)("span",{className:"refresh-icon ".concat(O?"spinning":""),children:"\u21bb"}),Object(N.jsx)("span",{className:"refresh-text",children:"Update"})]})]})})]}),h&&Object(N.jsx)("div",{className:"hotlines-message ".concat(h.includes("successfully")?"success":"error"),children:Object(N.jsx)("p",{children:h})}),Object(N.jsx)("div",{className:"emergency-notice",children:Object(N.jsx)("p",{className:"emergency-text",children:Object(N.jsx)("strong",{children:"If you are in immediate danger of harming yourself or others, please call your local emergency services (such as 911 in the US) immediately."})})}),a&&Object(N.jsxs)("div",{className:"hotlines-list",children:[Object(N.jsxs)("h3",{children:["Crisis Support in ",a.country]}),a.hotlines.map(((e,t)=>Object(N.jsxs)("div",{className:"hotline-card",children:[Object(N.jsx)("h4",{className:"hotline-name",children:e.name}),e.phone&&Object(N.jsxs)("div",{className:"hotline-phone ".concat(e.phone.toLowerCase().startsWith("text")?"":"clickable"),onClick:()=>f(e.phone),children:[Object(N.jsx)("span",{className:"phone-icon",children:"\ud83d\udcde"})," ",e.phone]}),e.altPhone&&Object(N.jsxs)("div",{className:"hotline-alt-phone ".concat(e.altPhone.toLowerCase().startsWith("text")?"":"clickable"),onClick:()=>f(e.altPhone),children:[Object(N.jsx)("span",{className:"phone-icon",children:"\ud83d\udcde"})," ",e.altPhone]}),e.description&&Object(N.jsx)("div",{className:"hotline-description",children:e.description}),e.website&&Object(N.jsxs)("a",{href:e.website,target:"_blank",rel:"noopener noreferrer",className:"hotline-website",children:["Visit Website ",Object(N.jsx)("span",{className:"external-icon",children:"\u2197\ufe0f"})]})]},t)))]}),Object(N.jsxs)("div",{className:"additional-resources",children:[Object(N.jsx)("h3",{children:"Additional Resources"}),Object(N.jsxs)("p",{children:["International Association for Suicide Prevention:",Object(N.jsx)("a",{href:"https://www.iasp.info/resources/Crisis_Centres/",target:"_blank",rel:"noopener noreferrer",children:"Find more crisis centers worldwide"})]}),Object(N.jsxs)("p",{children:["Wikipedia List of Suicide Crisis Lines:",Object(N.jsx)("a",{href:"https://en.wikipedia.org/wiki/List_of_suicide_crisis_lines",target:"_blank",rel:"noopener noreferrer",children:"View complete list"})]})]})]})]})};const Q="MindMattersDB",Z="settings",$=async()=>{if(!("Notification"in window))return!1;if("granted"===Notification.permission)return!0;if("denied"===Notification.permission)return!1;try{return"granted"===await Notification.requestPermission()}catch(e){return console.error("Error requesting notification permission:",e),!1}},X=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!await $())return console.warn("Cannot use notifications. Permission denied or not supported."),!1;try{await ee({enabled:!0,reminderTime:{hour:e,minute:t}});const a=new Date,n=new Date(a.getFullYear(),a.getMonth(),a.getDate(),e,t,0);if(n<a&&n.setDate(n.getDate()+1),"serviceWorker"in navigator&&navigator.serviceWorker.controller)return navigator.serviceWorker.controller.postMessage({type:"SCHEDULE_NOTIFICATION",title:"MindMatters Daily Check-in",body:"How are you feeling today? Take a moment to log your mood.",tag:"daily-reminder",timestamp:n.getTime()}),!0;{const e=n.getTime()-a.getTime();return setTimeout((()=>{new Notification("MindMatters Daily Check-in",{body:"How are you feeling today? Take a moment to log your mood.",icon:"/icons/icon-192x192.png",badge:"/icons/badge-96x96.png"})}),e),!0}}catch(a){return console.error("Error scheduling notification:",a),!1}},ee=async e=>{const t=await Object(d.a)(Q,1,{upgrade(e){e.objectStoreNames.contains(Z)||e.createObjectStore(Z,{keyPath:"id"})}});await t.put(Z,{id:"notificationSettings",value:e})},te=async()=>{try{const e=await Object(d.a)(Q,1),t=await e.get(Z,"notificationSettings");return t?t.value:null}catch(e){return console.error("Error getting notification settings:",e),null}};a(41);var ae=()=>{const[e,t]=Object(n.useState)("notifications"),[a,s]=Object(n.useState)("default"),[o,r]=Object(n.useState)(!1),[i,c]=Object(n.useState)("20:00"),[l,d]=Object(n.useState)(!1),[h,u]=Object(n.useState)("1.0.0"),[m,j]=Object(n.useState)(navigator.onLine?"online":"offline"),[b,p]=Object(n.useState)(!1),[g,y]=Object(n.useState)(null);Object(n.useEffect)((()=>{"Notification"in window&&(async()=>{s(Notification.permission);const e=await(async()=>{try{const e=await te();return e&&e.enabled}catch(e){return console.error("Error checking reminder state:",e),!1}})();r(e);const t=await(async()=>{try{const e=await te();return e&&e.reminderTime?e.reminderTime:{hour:20,minute:0}}catch(e){return console.error("Error getting reminder time:",e),{hour:20,minute:0}}})();t&&c("".concat(String(t.hour).padStart(2,"0"),":").concat(String(t.minute).padStart(2,"0")))})()}),[]),Object(n.useEffect)((()=>{(()=>{const e=window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone||document.referrer.includes("android-app://");d(e)})()}),[]),Object(n.useEffect)((()=>{const e=()=>j("online"),t=()=>j("offline");return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}),[]),Object(n.useEffect)((()=>{(async()=>{if("storage"in navigator&&"estimate"in navigator.storage)try{const e=await navigator.storage.estimate(),t=Math.round(e.usage/1048576*10)/10,a=Math.round(e.quota/1048576*10)/10,n=Math.round(e.usage/e.quota*100);y({used:t,quota:a,percent:n})}catch(e){console.error("Error calculating storage usage:",e)}})()}),[]);return Object(N.jsxs)("div",{className:"settings",children:[Object(N.jsxs)("h2",{children:[Object(N.jsx)("span",{className:"settings-icon",children:"\u2699\ufe0f"}),"Settings"]}),Object(N.jsxs)("div",{className:"settings-container",children:[Object(N.jsxs)("div",{className:"settings-sidebar",children:[Object(N.jsxs)("button",{className:"settings-nav-btn ".concat("notifications"===e?"active":""),onClick:()=>t("notifications"),children:[Object(N.jsx)("span",{className:"settings-nav-icon",children:"\ud83d\udd14"}),"Notifications"]}),Object(N.jsxs)("button",{className:"settings-nav-btn ".concat("app"===e?"active":""),onClick:()=>t("app"),children:[Object(N.jsx)("span",{className:"settings-nav-icon",children:"\ud83d\udcf1"}),"App Installation"]}),Object(N.jsxs)("button",{className:"settings-nav-btn ".concat("data"===e?"active":""),onClick:()=>t("data"),children:[Object(N.jsx)("span",{className:"settings-nav-icon",children:"\ud83d\udcbe"}),"Data Management"]}),Object(N.jsxs)("button",{className:"settings-nav-btn ".concat("about"===e?"active":""),onClick:()=>t("about"),children:[Object(N.jsx)("span",{className:"settings-nav-icon",children:"\u2139\ufe0f"}),"About"]})]}),Object(N.jsxs)("div",{className:"settings-content",children:["notifications"===e&&Object(N.jsxs)("div",{className:"settings-section",children:[Object(N.jsx)("h3",{children:"Notification Settings"}),Object(N.jsx)("p",{children:"Configure reminders to help you maintain a consistent journaling habit."}),Object(N.jsxs)("div",{className:"settings-subsection",children:[Object(N.jsx)("h4",{children:"Push Notifications"}),"Notification"in window?"denied"===a?Object(N.jsx)("p",{className:"settings-warning",children:"Notification permission was denied. Please update your browser settings to enable notifications."}):"granted"!==a?Object(N.jsxs)("div",{children:[Object(N.jsx)("p",{children:"Allow MindMatters to send you helpful reminders."}),Object(N.jsx)("button",{onClick:async()=>{const e=await(async()=>{if(!("Notification"in window))return"unsupported";try{return await Notification.requestPermission()}catch(e){return console.error("Error requesting notification permission:",e),"error"}})();s(e)},className:"settings-btn",children:"Enable Notifications"})]}):Object(N.jsxs)("div",{children:[Object(N.jsx)("p",{children:"Notification permission granted. You can now receive reminders."}),Object(N.jsx)("button",{onClick:async()=>{const e=await(async()=>{if(!await $())return console.warn("Cannot send test notification. Permission denied or not supported."),!1;try{return new Notification("MindMatters Test Notification",{body:"This is a test notification from MindMatters app.",icon:"/icons/icon-192x192.png",badge:"/icons/badge-96x96.png"}),!0}catch(e){return console.error("Error sending test notification:",e),!1}})();p(e),e&&setTimeout((()=>p(!1)),3e3)},className:"settings-btn",disabled:b,children:b?"Notification Sent!":"Send Test Notification"})]}):Object(N.jsx)("p",{className:"settings-warning",children:"Your browser doesn't support push notifications."})]}),Object(N.jsxs)("div",{className:"settings-subsection",children:[Object(N.jsx)("h4",{children:"Daily Journal Reminder"}),Object(N.jsx)("div",{className:"toggle-setting",children:Object(N.jsxs)("label",{className:"toggle-label",children:["Enable daily reminder",Object(N.jsxs)("div",{className:"toggle-switch",children:[Object(N.jsx)("input",{type:"checkbox",checked:o,onChange:async()=>{try{if(o)await(async()=>{try{return await ee({enabled:!1}),"serviceWorker"in navigator&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage({type:"CANCEL_NOTIFICATIONS",tag:"daily-reminder"}),!0}catch(e){return console.error("Error cancelling reminders:",e),!1}})(),r(!1);else{const[e,t]=i.split(":").map(Number),a=await X(e,t);r(a)}}catch(e){console.error("Error toggling reminder:",e)}},disabled:"granted"!==a}),Object(N.jsx)("span",{className:"toggle-slider"})]})]})}),Object(N.jsxs)("div",{className:"time-setting",children:[Object(N.jsx)("label",{htmlFor:"reminderTime",children:"Reminder Time:"}),Object(N.jsx)("input",{type:"time",id:"reminderTime",value:i,onChange:async e=>{const t=e.target.value;if(c(t),o){const[e,a]=t.split(":").map(Number);await X(e,a)}},disabled:!o||"granted"!==a}),Object(N.jsx)("p",{className:"time-note",children:"We'll send you a reminder to journal at this time each day."})]})]})]}),"app"===e&&Object(N.jsxs)("div",{className:"settings-section",children:[Object(N.jsx)("h3",{children:"App Installation"}),Object(N.jsx)("p",{children:"Install MindMatters on your device for a better experience and offline access."}),Object(N.jsxs)("div",{className:"settings-subsection",children:[Object(N.jsx)("h4",{children:"Install as App"}),l?Object(N.jsx)("p",{children:"MindMatters is already installed on your device."}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("p",{children:"Install MindMatters on your home screen for quick access and a full-screen experience, even when offline."}),Object(N.jsx)("button",{onClick:()=>{window.deferredPrompt&&(window.deferredPrompt.prompt(),window.deferredPrompt.userChoice.then((e=>{"accepted"===e.outcome?(console.log("User accepted the install prompt"),d(!0)):console.log("User dismissed the install prompt"),window.deferredPrompt=null})))},className:"install-button",disabled:!window.deferredPrompt,children:"Install MindMatters"}),!window.deferredPrompt&&Object(N.jsx)("div",{className:"install-note",children:Object(N.jsxs)("p",{children:["To install manually:",navigator.userAgent.includes("Chrome")&&Object(N.jsx)("span",{children:' Click the menu (\u22ee) then "Install App"'}),navigator.userAgent.includes("Firefox")&&Object(N.jsx)("span",{children:' Click the menu (\u2261) then "Install app"'}),navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&Object(N.jsx)("span",{children:' Click the share button then "Add to Home Screen"'})]})})]})]}),Object(N.jsxs)("div",{className:"settings-subsection",children:[Object(N.jsx)("h4",{children:"Offline Capability"}),Object(N.jsxs)("div",{className:"status-items",children:[Object(N.jsxs)("div",{className:"status-item",children:[Object(N.jsx)("span",{className:"status-label",children:"Current Status:"}),Object(N.jsx)("span",{className:"status-value ".concat(m),children:"online"===m?"Connected":"Offline"})]}),Object(N.jsx)("p",{className:"status-info",children:"MindMatters works even when you're offline. Your data will be stored locally and synced when you reconnect."})]})]})]}),"data"===e&&Object(N.jsxs)("div",{className:"settings-section",children:[Object(N.jsx)("h3",{children:"Data Management"}),Object(N.jsx)("p",{children:"Manage your journal data and app storage."}),Object(N.jsxs)("div",{className:"settings-subsection",children:[Object(N.jsx)("h4",{children:"Storage Usage"}),g?Object(N.jsxs)("div",{className:"storage-usage",children:[Object(N.jsx)("div",{className:"usage-bar-container",children:Object(N.jsx)("div",{className:"usage-bar",style:{width:"".concat(g.percent,"%")}})}),Object(N.jsxs)("p",{className:"usage-text",children:["Using ",g.used," MB of ",g.quota," MB (",g.percent,"%)"]})]}):Object(N.jsx)("p",{children:"Storage information not available in this browser."})]}),Object(N.jsxs)("div",{className:"settings-subsection",children:[Object(N.jsx)("h4",{children:"Data Actions"}),Object(N.jsxs)("div",{className:"data-actions",children:[Object(N.jsx)("button",{onClick:async()=>{if(window.confirm("Are you sure? This will delete all your journal entries and settings."))try{if((await window.indexedDB.databases()).forEach((e=>{window.indexedDB.deleteDatabase(e.name)})),localStorage.clear(),"caches"in window){const e=await caches.keys();await Promise.all(e.map((e=>caches.delete(e))))}window.location.reload()}catch(e){console.error("Error clearing app data:",e)}},className:"danger-button",children:"Clear All App Data"}),Object(N.jsx)("p",{className:"warning-text",children:"This will delete all your journal entries, mood tracking data, and app settings. This action cannot be undone."})]})]})]}),"about"===e&&Object(N.jsxs)("div",{className:"settings-section",children:[Object(N.jsx)("h3",{children:"About MindMatters"}),Object(N.jsxs)("div",{className:"settings-subsection",children:[Object(N.jsxs)("div",{className:"app-info",children:[Object(N.jsx)("img",{src:"/icons/icon-192x192.png",alt:"MindMatters Logo",className:"app-logo"}),Object(N.jsxs)("div",{children:[Object(N.jsx)("h4",{children:"MindMatters"}),Object(N.jsxs)("p",{children:["Version ",h]})]})]}),Object(N.jsx)("p",{className:"app-description",children:"MindMatters is an offline-first mental health journal designed to help you track your mood, thoughts, and emotions."})]}),Object(N.jsxs)("div",{className:"settings-subsection",children:[Object(N.jsx)("h4",{children:"App Status"}),Object(N.jsxs)("div",{className:"status-items",children:[Object(N.jsxs)("div",{className:"status-item",children:[Object(N.jsx)("span",{className:"status-label",children:"Service Worker:"}),Object(N.jsx)("span",{className:"status-value",children:"serviceWorker"in navigator?"Supported":"Not Supported"})]}),Object(N.jsxs)("div",{className:"status-item",children:[Object(N.jsx)("span",{className:"status-label",children:"Installed as PWA:"}),Object(N.jsx)("span",{className:"status-value",children:l?"Yes":"No"})]}),Object(N.jsxs)("div",{className:"status-item",children:[Object(N.jsx)("span",{className:"status-label",children:"Notifications:"}),Object(N.jsx)("span",{className:"status-value",children:"Notification"in window?"granted"===a?"Enabled":"Disabled":"Not Supported"})]}),Object(N.jsxs)("div",{className:"status-item",children:[Object(N.jsx)("span",{className:"status-label",children:"Connection:"}),Object(N.jsx)("span",{className:"status-value ".concat(m),children:"online"===m?"Online":"Offline"})]})]})]}),Object(N.jsx)("div",{className:"credits",children:Object(N.jsx)("p",{children:"\xa9 2025 MindMatters - Created with \u2764\ufe0f for mental wellbeing"})})]})]})]})]})};a(42);var ne=e=>{let{defaultTab:t}=e;const[a,s]=Object(n.useState)(t||"journal"),[o,r]=Object(n.useState)(!1),[l,d]=Object(n.useState)(navigator.onLine),h=(Object(c.g)(),Object(c.h)()),{currentMood:u}=C();Object(n.useEffect)((()=>{const e=h.pathname;"/journal"===e?s("journal"):"/history"===e?s("history"):"/mood-tracker"===e?s("mood"):"/breathing"===e?s("breathing"):"/weather-mood"===e?s("weather"):"/daily-quote"===e?s("quote"):"/crisis-hotlines"===e?s("hotlines"):"/emergency-contacts"===e?s("contacts"):"/settings"===e&&s("settings")}),[h]),Object(n.useEffect)((()=>{const e=()=>d(!0),t=()=>d(!1);return window.addEventListener("online",e),window.addEventListener("offline",t),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",t)}}),[]);return Object(N.jsxs)("div",{className:"dashboard ".concat(u?"mood-".concat(u):""),children:[Object(N.jsxs)("header",{className:"dashboard-header",children:[Object(N.jsxs)("div",{className:"header-content",children:[Object(N.jsx)("h1",{children:"MindMatters"}),Object(N.jsx)("p",{children:"Your personal mental wellness companion"})]}),Object(N.jsx)("button",{className:"mobile-nav-toggle",onClick:()=>{r(!o)},"aria-label":"Toggle navigation menu",children:Object(N.jsx)("span",{className:"hamburger ".concat(o?"active":"")})}),Object(N.jsxs)("div",{className:"header-actions",children:[!l&&Object(N.jsx)("div",{className:"offline-indicator",title:"App is in offline mode",children:"Offline"}),Object(N.jsx)(i.b,{to:"/settings",className:"settings-link ".concat("settings"===a?"active":""),"aria-label":"Settings",children:Object(N.jsx)("span",{className:"settings-icon",children:"\u2699\ufe0f"})}),Object(N.jsx)(D,{className:"header-sos"})]})]}),Object(N.jsx)("div",{className:"nav-container ".concat(o?"mobile-open":""),children:Object(N.jsx)("nav",{className:"dashboard-nav",children:[{category:"Journal",items:[{id:"journal",path:"/journal",label:"New Entry",icon:"\ud83d\udcdd"},{id:"history",path:"/history",label:"Journal History",icon:"\ud83d\udcda"}]},{category:"Mood",items:[{id:"mood",path:"/mood-tracker",label:"Mood Tracker",icon:"\ud83d\udcca"},{id:"weather",path:"/weather-mood",label:"Weather & Mood",icon:"\ud83c\udf24\ufe0f"}]},{category:"Wellness",items:[{id:"breathing",path:"/breathing",label:"Breathing",icon:"\ud83e\uddd8"},{id:"quote",path:"/daily-quote",label:"Daily Quote",icon:"\ud83d\udcad"}]},{category:"Emergency",items:[{id:"hotlines",path:"/crisis-hotlines",label:"Crisis Hotlines",icon:"\ud83c\udd98"},{id:"contacts",path:"/emergency-contacts",label:"Emergency Contacts",icon:"\ud83d\udc65"}]}].map((e=>Object(N.jsxs)("div",{className:"nav-category",children:[Object(N.jsx)("h3",{className:"category-heading",children:e.category}),Object(N.jsx)("div",{className:"nav-items",children:e.items.map((e=>Object(N.jsxs)(i.b,{to:e.path,className:"nav-button ".concat(a===e.id?"active":""),onClick:()=>r(!1),children:[Object(N.jsx)("span",{className:"nav-icon",children:e.icon}),Object(N.jsx)("span",{className:"nav-label",children:e.label})]},e.id)))})]},e.category)))})}),Object(N.jsxs)("main",{className:"dashboard-content",children:["journal"===a&&Object(N.jsx)(T,{}),"history"===a&&Object(N.jsx)(E,{}),"mood"===a&&Object(N.jsx)(I,{}),"breathing"===a&&Object(N.jsx)(P,{}),"weather"===a&&Object(N.jsx)(R,{}),"quote"===a&&Object(N.jsx)(F,{}),"hotlines"===a&&Object(N.jsx)(K,{}),"contacts"===a&&Object(N.jsx)(L,{}),"settings"===a&&Object(N.jsx)(ae,{}),"journal"===a&&Object(N.jsx)(F,{})]})]})};a(18);var se=function(){return Object(N.jsx)(k,{children:Object(N.jsx)(i.a,{children:Object(N.jsx)("div",{className:"App",children:Object(N.jsxs)(c.d,{children:[Object(N.jsx)(c.b,{path:"/journal",exact:!0,children:Object(N.jsx)(ne,{defaultTab:"journal"})}),Object(N.jsx)(c.b,{path:"/history",exact:!0,children:Object(N.jsx)(ne,{defaultTab:"history"})}),Object(N.jsx)(c.b,{path:"/mood-tracker",exact:!0,children:Object(N.jsx)(ne,{defaultTab:"mood"})}),Object(N.jsx)(c.b,{path:"/breathing",exact:!0,children:Object(N.jsx)(ne,{defaultTab:"breathing"})}),Object(N.jsx)(c.b,{path:"/weather-mood",exact:!0,children:Object(N.jsx)(ne,{defaultTab:"weather"})}),Object(N.jsx)(c.b,{path:"/daily-quote",exact:!0,children:Object(N.jsx)(ne,{defaultTab:"quote"})}),Object(N.jsx)(c.b,{path:"/crisis-hotlines",exact:!0,children:Object(N.jsx)(ne,{defaultTab:"hotlines"})}),Object(N.jsx)(c.b,{path:"/emergency-contacts",exact:!0,children:Object(N.jsx)(ne,{defaultTab:"contacts"})}),Object(N.jsx)(c.b,{path:"/settings",exact:!0,children:Object(N.jsx)(ne,{defaultTab:"settings"})}),Object(N.jsx)(c.b,{path:"/",exact:!0,children:Object(N.jsx)(c.a,{to:"/journal"})}),Object(N.jsx)(c.b,{path:"*",children:Object(N.jsx)(c.a,{to:"/journal"})})]})})})})};"serviceWorker"in navigator&&window.addEventListener("load",(()=>{const e=window.location.hostname.includes("github.io"),t="".concat(e?"/mindmatters-app":"","/service-worker.js");console.log("Registering service worker at:",t),navigator.serviceWorker.register(t).then((e=>{console.log("ServiceWorker registered with scope:",e.scope)})).catch((e=>{console.error("ServiceWorker registration failed:",e)}))})),window.deferredPrompt=null,window.addEventListener("beforeinstallprompt",(e=>{e.preventDefault(),window.deferredPrompt=e,console.log("App can be installed")})),window.addEventListener("appinstalled",(()=>{window.deferredPrompt=null,console.log("PWA installed successfully")})),navigator.onLine||document.body.classList.add("offline-mode"),window.addEventListener("online",(()=>document.body.classList.remove("offline-mode"))),window.addEventListener("offline",(()=>document.body.classList.add("offline-mode"))),r.a.render(Object(N.jsx)(s.a.StrictMode,{children:Object(N.jsx)(se,{})}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.d3b10926.chunk.js.map